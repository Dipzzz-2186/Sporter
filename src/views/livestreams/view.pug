extends ../layout/main

block content
  .container.my-5
    // Breadcrumb Navigation
    nav(aria-label="breadcrumb")
      ol.breadcrumb
        li.breadcrumb-item
          a(href="/") Home
        li.breadcrumb-item
          a(href="/livestreams") Livestreams
        li.breadcrumb-item.active(aria-current="page")= livestream.title

    // Back Button
    .mb-4
      a.btn.btn-outline-secondary.btn-sm(href="javascript:history.back()")
        i.bi.bi-arrow-left.me-2
        | Kembali

    .row.g-4
      // Main Content Area
      .col-lg-8
        .card.shadow-sm.border-0
          .card-body.p-0
            // Live Badge
            if livestream.is_live
              .position-absolute.top-0.start-0.m-3(style="z-index: 10")
                span.badge.bg-danger.fs-6.px-3.py-2
                  i.bi.bi-circle-fill.me-2(style="font-size: 0.5rem")
                  | LIVE

            // Video Player
            if embedUrl
              .ratio.ratio-16x9.bg-dark
                iframe(
                  src=embedUrl
                  allowfullscreen
                  frameborder="0"
                  allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                  loading="lazy"
                )
            else
              .ratio.ratio-16x9.bg-dark.d-flex.align-items-center.justify-content-center
                .text-center.text-white.p-4
                  i.bi.bi-play-circle.display-1.mb-3
                  p.mb-3 Livestream tidak dapat ditampilkan di halaman ini
                  a.btn.btn-light(href=livestream.url target="_blank" rel="noopener noreferrer")
                    i.bi.bi-box-arrow-up-right.me-2
                    | Buka di Platform Asli

            // Title and Description
            .p-4
              h1.h3.fw-bold.mb-3= livestream.title
              
              // Time Information
              if livestream.start_time || livestream.end_time
                .d-flex.flex-wrap.gap-3.text-muted.mb-3
                  if livestream.start_time
                    div
                      i.bi.bi-calendar-event.me-2
                      small
                        strong Mulai: 
                        | #{new Date(livestream.start_time).toLocaleString('id-ID', { dateStyle: 'long', timeStyle: 'short' })}
                  if livestream.end_time
                    div
                      i.bi.bi-calendar-check.me-2
                      small
                        strong Selesai: 
                        | #{new Date(livestream.end_time).toLocaleString('id-ID', { dateStyle: 'long', timeStyle: 'short' })}

              // Description (if available)
              if livestream.description
                .mt-4
                  h5.fw-semibold.mb-2 Deskripsi
                  p.text-muted= livestream.description

      // Sidebar
      .col-lg-4
        // Information Card
        .card.shadow-sm.border-0.mb-4
          .card-header.bg-primary.text-white.py-3
            h5.mb-0.fw-semibold
              i.bi.bi-info-circle.me-2
              | Informasi Livestream

          .card-body.p-4
            if livestream.sport_name
              .mb-3.pb-3.border-bottom
                small.text-muted.text-uppercase.d-block.mb-1 Cabang Olahraga
                .fw-semibold.text-dark= livestream.sport_name

            if livestream.event_title
              .mb-3.pb-3.border-bottom
                small.text-muted.text-uppercase.d-block.mb-1 Event
                .fw-semibold.text-dark= livestream.event_title

            if livestream.match_title
              .mb-3.pb-3.border-bottom
                small.text-muted.text-uppercase.d-block.mb-1 Pertandingan
                .fw-semibold.text-dark= livestream.match_title

            // Status Badge
            .mt-3
              small.text-muted.text-uppercase.d-block.mb-2 Status
              if livestream.is_live
                span.badge.bg-success.px-3.py-2
                  i.bi.bi-broadcast.me-1
                  | SEDANG LIVE
              else
                span.badge.bg-secondary.px-3.py-2
                  i.bi.bi-stop-circle.me-1
                  | Tidak Live

        // Share Card (Optional)
        .card.shadow-sm.border-0
          .card-body.p-4.text-center
            h6.fw-semibold.mb-3 Bagikan Livestream
            .d-flex.justify-content-center.gap-2
              a.btn.btn-outline-primary.btn-sm(href="#" title="Bagikan ke Facebook")
                i.bi.bi-facebook
              a.btn.btn-outline-info.btn-sm(href="#" title="Bagikan ke Twitter")
                i.bi.bi-twitter
              a.btn.btn-outline-success.btn-sm(href="#" title="Bagikan ke WhatsApp")
                i.bi.bi-whatsapp
              a.btn.btn-outline-secondary.btn-sm(href="#" title="Salin Link")
                i.bi.bi-link-45deg