extends ../layout/main

block content
  style.
    :root {
      --primary-color: #3B82F6;
      --primary-dark: #1D4ED8;
      --danger-color: #DC2626;
      --danger-dark: #B91C1C;
      --success-color: #059669;
      --success-dark: #047857;
      --warning-color: #D97706;
      --gray-50: #F9FAFB;
      --gray-100: #F3F4F6;
      --gray-200: #E5E7EB;
      --gray-300: #D1D5DB;
      --gray-400: #9CA3AF;
      --gray-500: #6B7280;
      --gray-600: #4B5563;
      --gray-700: #374151;
      --gray-800: #1F2937;
      --gray-900: #111827;
      --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
      --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
      --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
      --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
    }

    /* Form Hero Section */
    .form-hero {
      background: white;
      padding: 2.5rem 0;
      border-bottom: 1px solid var(--gray-200);
      margin-bottom: 2rem;
    }
    
    .page-title {
      font-size: 1.75rem;
      font-weight: 700;
      color: var(--gray-900);
      margin-bottom: 0.5rem;
      display: flex;
      align-items: center;
      gap: 0.75rem;
    }
    
    .page-subtitle {
      color: var(--gray-600);
      margin: 0;
      font-size: 1rem;
      max-width: 600px;
    }
    
    /* Form Container */
    .form-container {
      max-width: 700px;
      margin: 0 auto;
    }
    
    /* Form Card */
    .form-card {
      background: white;
      border-radius: 20px;
      padding: 2.5rem;
      box-shadow: var(--shadow-xl);
      border: 1px solid var(--gray-200);
      animation: slideInUp 0.5s ease-out;
      margin-bottom: 2rem;
    }
    
    @keyframes slideInUp {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    /* Form Header */
    .form-header {
      display: flex;
      align-items: center;
      gap: 1rem;
      margin-bottom: 2rem;
      padding-bottom: 1.5rem;
      border-bottom: 1px solid var(--gray-200);
    }
    
    .form-icon {
      width: 60px;
      height: 60px;
      background: linear-gradient(135deg, var(--primary-color) 0%, var(--success-color) 100%);
      border-radius: 14px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 1.5rem;
      box-shadow: var(--shadow-md);
    }
    
    .form-header-content h2 {
      font-size: 1.5rem;
      font-weight: 700;
      color: var(--gray-900);
      margin: 0 0 0.25rem 0;
    }
    
    .form-header-content p {
      color: var(--gray-600);
      margin: 0;
      font-size: 0.95rem;
    }
    
    /* Form Sections */
    .form-section {
      margin-bottom: 2rem;
      padding-bottom: 1.5rem;
      border-bottom: 1px solid var(--gray-100);
    }
    
    .form-section:last-of-type {
      border-bottom: none;
      margin-bottom: 1rem;
    }
    
    .section-title {
      font-size: 1.1rem;
      font-weight: 600;
      color: var(--gray-800);
      margin-bottom: 1.5rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    
    .section-title i {
      color: var(--primary-color);
    }
    
    /* Form Groups */
    .form-group {
      margin-bottom: 1.5rem;
      position: relative;
    }
    
    .form-group:last-child {
      margin-bottom: 0;
    }
    
    .form-label {
      font-weight: 600;
      color: var(--gray-700);
      margin-bottom: 0.5rem;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    
    .form-label .required {
      color: var(--danger-color);
      font-size: 0.85rem;
      font-weight: 500;
    }
    
    .form-control {
      border-radius: 12px;
      padding: 0.875rem 1rem;
      border: 2px solid var(--gray-300);
      font-size: 1rem;
      color: var(--gray-800);
      transition: all 0.3s ease;
      background: white;
    }
    
    .form-control:focus {
      outline: none;
      border-color: var(--primary-color);
      box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
      transform: translateY(-1px);
    }
    
    .form-control:hover:not(:focus) {
      border-color: var(--gray-400);
    }
    
    .form-control::placeholder {
      color: var(--gray-400);
    }
    
    /* Password Input */
    .password-input-wrapper {
      position: relative;
    }
    
    .password-toggle {
      position: absolute;
      right: 1rem;
      top: 50%;
      transform: translateY(-50%);
      background: none;
      border: none;
      color: var(--gray-500);
      cursor: pointer;
      transition: color 0.2s ease;
      padding: 0.25rem;
      border-radius: 6px;
    }
    
    .password-toggle:hover {
      color: var(--primary-color);
      background: var(--gray-100);
    }
    
    /* Input Icons */
    .input-with-icon {
      position: relative;
    }
    
    .input-icon {
      position: absolute;
      left: 1rem;
      top: 50%;
      transform: translateY(-50%);
      color: var(--gray-500);
      font-size: 1.1rem;
    }
    
    .input-with-icon .form-control {
      padding-left: 3rem;
    }
    
    /* Form Hints */
    .form-hint {
      font-size: 0.85rem;
      color: var(--gray-500);
      margin-top: 0.5rem;
      display: flex;
      align-items: center;
      gap: 0.375rem;
    }
    
    .form-hint i {
      font-size: 0.9rem;
    }
    
    /* Action Bar */
    .action-bar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 2.5rem;
      padding-top: 2rem;
      border-top: 1px solid var(--gray-200);
    }
    
    .btn {
      padding: 0.875rem 1.75rem;
      border-radius: 12px;
      font-weight: 600;
      font-size: 1rem;
      transition: all 0.3s ease;
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      text-decoration: none;
      border: 2px solid transparent;
      cursor: pointer;
    }
    
    .btn-outline-secondary {
      background: transparent;
      color: var(--gray-700);
      border-color: var(--gray-300);
    }
    
    .btn-outline-secondary:hover {
      background: var(--gray-100);
      border-color: var(--gray-400);
      color: var(--gray-800);
      transform: translateY(-2px);
      box-shadow: var(--shadow-md);
      text-decoration: none;
    }
    
    .btn-primary {
      background: linear-gradient(135deg, var(--primary-color) 0%, var(--primary-dark) 100%);
      color: white;
      border: none;
      box-shadow: 0 5px 15px rgba(59, 130, 246, 0.3);
    }
    
    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(59, 130, 246, 0.4);
      color: white;
      text-decoration: none;
    }
    
    /* Alert Styles */
    .alert-container {
      margin-bottom: 2rem;
      max-width: 700px;
      margin-left: auto;
      margin-right: auto;
    }
    
    .modern-alert {
      border: none;
      border-radius: 16px;
      padding: 1.25rem 1.5rem;
      box-shadow: var(--shadow-md);
      animation: slideInDown 0.3s ease-out;
      display: flex;
      align-items: center;
      gap: 1rem;
      border-left: 4px solid transparent;
    }
    
    @keyframes slideInDown {
      from { opacity: 0; transform: translateY(-20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    .modern-alert-danger {
      background: linear-gradient(135deg, #FEE2E2 0%, #FECACA 100%);
      color: var(--danger-color);
      border-left-color: var(--danger-color);
    }
    
    .modern-alert-success {
      background: linear-gradient(135deg, #D1FAE5 0%, #A7F3D0 100%);
      color: var(--success-color);
      border-left-color: var(--success-color);
    }
    
    .alert-icon {
      font-size: 1.5rem;
      flex-shrink: 0;
    }
    
    /* Form Validation */
    .form-control.is-invalid {
      border-color: var(--danger-color);
      background-image: none;
    }
    
    .form-control.is-invalid:focus {
      box-shadow: 0 0 0 3px rgba(220, 38, 38, 0.1);
    }
    
    .invalid-feedback {
      color: var(--danger-color);
      font-size: 0.85rem;
      margin-top: 0.5rem;
      display: flex;
      align-items: center;
      gap: 0.375rem;
    }
    
    /* Loading State */
    .btn-loading {
      position: relative;
      color: transparent !important;
    }
    
    .btn-loading::after {
      content: '';
      position: absolute;
      width: 20px;
      height: 20px;
      top: 50%;
      left: 50%;
      margin-top: -10px;
      margin-left: -10px;
      border: 2px solid rgba(255, 255, 255, 0.3);
      border-top-color: white;
      border-radius: 50%;
      animation: spin 0.8s linear infinite;
    }
    
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
    
    /* Responsive Design */
    @media (max-width: 768px) {
      .form-hero {
        padding: 2rem 0;
      }
      
      .page-title {
        font-size: 1.5rem;
      }
      
      .form-card {
        padding: 1.75rem;
        border-radius: 16px;
      }
      
      .form-header {
        flex-direction: column;
        text-align: center;
        gap: 1rem;
      }
      
      .form-icon {
        width: 50px;
        height: 50px;
        font-size: 1.25rem;
      }
      
      .action-bar {
        flex-direction: column-reverse;
        gap: 1rem;
        margin-top: 2rem;
      }
      
      .action-bar .btn {
        width: 100%;
        justify-content: center;
      }
      
      .form-section {
        padding-bottom: 1.25rem;
        margin-bottom: 1.5rem;
      }
    }
    
    @media (max-width: 480px) {
      .form-card {
        padding: 1.5rem;
        border-radius: 14px;
      }
      
      .form-header-content h2 {
        font-size: 1.25rem;
      }
      
      .section-title {
        font-size: 1rem;
      }
      
      .form-label {
        font-size: 0.95rem;
      }
      
      .form-control {
        padding: 0.75rem 0.875rem;
        font-size: 0.95rem;
      }
      
      .input-with-icon .form-control {
        padding-left: 2.75rem;
      }
    }

  .form-hero
    .container
      h1.page-title
        i.bi.bi-person-plus
        | Buat Seller
      p.page-subtitle Tambahkan akun penjual merchandise baru ke dalam sistem

  .container

    // Alert Messages
    if flash && flash.error && flash.error.length
      .alert-container
        each msg in flash.error
          .modern-alert.modern-alert-danger
            i.bi.bi-exclamation-triangle-fill.alert-icon
            div= msg

    if flash && flash.success && flash.success.length
      .alert-container
        each msg in flash.success
          .modern-alert.modern-alert-success
            i.bi.bi-check-circle-fill.alert-icon
            div= msg

    .form-container
      .form-card
        .form-header
          .form-icon
            i.bi.bi-shop
          .form-header-content
            h2 Informasi Seller
            p Isi formulir di bawah untuk membuat akun seller baru
        
        form(method="post" action="/admin/sellers/create" id="createSellerForm")
          
          // Personal Information Section
          .form-section
            h3.section-title
              i.bi.bi-person-circle
              | Informasi Pribadi
            
            .form-group
              label.form-label(for="name")
                | Nama Seller
                span.required (wajib diisi)
              .input-with-icon
                i.bi.bi-person.input-icon
                input.form-control(
                  type="text"
                  id="name"
                  name="name"
                  required
                  placeholder="Masukkan nama lengkap seller"
                  value=(sellerData ? sellerData.name : '')
                )
              .form-hint
                i.bi.bi-info-circle
                | Nama akan ditampilkan sebagai identitas seller
            
            .form-group
              label.form-label(for="email")
                | Email
                span.required (wajib diisi)
              .input-with-icon
                i.bi.bi-envelope.input-icon
                input.form-control(
                  type="email"
                  id="email"
                  name="email"
                  required
                  placeholder="contoh@domain.com"
                  value=(sellerData ? sellerData.email : '')
                )
              .form-hint
                i.bi.bi-info-circle
                | Email akan digunakan untuk login dan notifikasi
        
          // Account Security Section
          .form-section
            h3.section-title
              i.bi.bi-shield-lock
              | Keamanan Akun
            
            .form-group
              label.form-label(for="password")
                | Password
                span.required (wajib diisi)
              .password-input-wrapper
                .input-with-icon
                  i.bi.bi-lock.input-icon
                  input.form-control(
                    type="password"
                    id="password"
                    name="password"
                    required
                    minlength="6"
                    placeholder="Minimal 6 karakter"
                    autocomplete="new-password"
                  )
                button.password-toggle(type="button" onclick="togglePassword('password')")
                  i.bi.bi-eye
              .form-hint
                i.bi.bi-key
                | Gunakan kombinasi huruf, angka, dan simbol untuk keamanan maksimal
            
            .form-group
              label.form-label(for="confirmPassword")
                | Konfirmasi Password
                span.required (wajib diisi)
              .password-input-wrapper
                .input-with-icon
                  i.bi.bi-lock.input-icon
                  input.form-control(
                    type="password"
                    id="confirmPassword"
                    name="confirmPassword"
                    required
                    minlength="6"
                    placeholder="Ketik ulang password"
                    autocomplete="new-password"
                  )
                button.password-toggle(type="button" onclick="togglePassword('confirmPassword')")
                  i.bi.bi-eye
              .form-hint
                i.bi.bi-check-circle
                | Pastikan password sama dengan di atas
        
          // Action Bar
          .action-bar
            a.btn.btn-outline-secondary(href="/admin/sellers")
              i.bi.bi-arrow-left
              | Kembali ke Daftar
            button.btn.btn-primary(type="submit" id="submitBtn")
              i.bi.bi-person-plus
              | Buat Seller

  script.
    // Toggle password visibility
    function togglePassword(inputId) {
      const input = document.getElementById(inputId);
      const toggleBtn = input.parentElement.nextElementSibling;
      
      if (input.type === 'password') {
        input.type = 'text';
        toggleBtn.innerHTML = '<i class="bi bi-eye-slash"></i>';
      } else {
        input.type = 'password';
        toggleBtn.innerHTML = '<i class="bi bi-eye"></i>';
      }
    }
    
    // Password confirmation validation
    const password = document.getElementById('password');
    const confirmPassword = document.getElementById('confirmPassword');
    
    function validatePasswords() {
      if (password.value !== confirmPassword.value) {
        confirmPassword.setCustomValidity('Password tidak sesuai');
        confirmPassword.classList.add('is-invalid');
        return false;
      } else {
        confirmPassword.setCustomValidity('');
        confirmPassword.classList.remove('is-invalid');
        return true;
      }
    }
    
    if (password && confirmPassword) {
      password.addEventListener('input', validatePasswords);
      confirmPassword.addEventListener('input', validatePasswords);
    }
    
    // Form submission handling
    const form = document.getElementById('createSellerForm');
    const submitBtn = document.getElementById('submitBtn');
    
    if (form) {
      form.addEventListener('submit', function(e) {
        // Validate passwords match
        if (!validatePasswords()) {
          e.preventDefault();
          showNotification('error', 'Password dan konfirmasi password tidak sesuai');
          return;
        }
        
        // Show loading state
        submitBtn.classList.add('btn-loading');
        submitBtn.disabled = true;
        
        // Remove loading state after 5 seconds (in case of error)
        setTimeout(() => {
          submitBtn.classList.remove('btn-loading');
          submitBtn.disabled = false;
        }, 5000);
      });
    }
    
    // Input validation on blur
    const requiredInputs = document.querySelectorAll('input[required]');
    requiredInputs.forEach(input => {
      input.addEventListener('blur', function() {
        if (!this.value) {
          this.classList.add('is-invalid');
        } else {
          this.classList.remove('is-invalid');
        }
      });
      
      input.addEventListener('input', function() {
        if (this.value) {
          this.classList.remove('is-invalid');
        }
      });
    });
    
    // Form reset on page load (if needed)
    window.addEventListener('load', function() {
      // Clear any previous form data
      const urlParams = new URLSearchParams(window.location.search);
      if (!urlParams.has('edit')) {
        form?.reset();
      }
    });
    
    // Keyboard shortcuts
    document.addEventListener('keydown', function(e) {
      // Ctrl/Cmd + S to submit form
      if ((e.ctrlKey || e.metaKey) && e.key === 's') {
        e.preventDefault();
        if (form && submitBtn) {
          submitBtn.click();
        }
      }
      
      // Escape to go back
      if (e.key === 'Escape') {
        e.preventDefault();
        window.location.href = '/admin/sellers';
      }
    });
    
    // Show notification function
    function showNotification(type, message) {
      // Create notification element
      const notification = document.createElement('div');
      notification.className = `modern-alert modern-alert-${type === 'error' ? 'danger' : 'success'}`;
      notification.style.position = 'fixed';
      notification.style.top = '20px';
      notification.style.right = '20px';
      notification.style.zIndex = '10000';
      notification.style.maxWidth = '350px';
      notification.innerHTML = `
        <i class="bi bi-${type === 'error' ? 'exclamation-triangle' : 'check-circle'}-fill alert-icon"></i>
        <div>${message}</div>
      `;
      
      document.body.appendChild(notification);
      
      // Remove after 5 seconds
      setTimeout(() => {
        notification.style.animation = 'slideInDown 0.3s ease-out reverse';
        setTimeout(() => notification.remove(), 300);
      }, 5000);
    }
    
    // Add custom CSS for form animations
    const style = document.createElement('style');
    style.textContent = `
      /* Smooth focus transitions */
      .form-control {
        transition: all 0.3s ease;
      }
      
      /* Hover effects for form sections */
      .form-section:hover .section-title {
        color: var(--primary-color);
      }
      
      /* Active button effects */
      .btn:active {
        transform: scale(0.98);
      }
      
      /* Password strength indicator */
      .password-strength {
        height: 4px;
        background: var(--gray-200);
        border-radius: 2px;
        margin-top: 0.5rem;
        overflow: hidden;
      }
      
      .password-strength-meter {
        height: 100%;
        width: 0%;
        background: var(--danger-color);
        transition: width 0.3s ease, background-color 0.3s ease;
      }
      
      .password-strength.weak .password-strength-meter {
        width: 33%;
        background: var(--danger-color);
      }
      
      .password-strength.medium .password-strength-meter {
        width: 66%;
        background: var(--warning-color);
      }
      
      .password-strength.strong .password-strength-meter {
        width: 100%;
        background: var(--success-color);
      }
      
      /* Form validation animation */
      @keyframes shake {
        0%, 100% { transform: translateX(0); }
        10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
        20%, 40%, 60%, 80% { transform: translateX(5px); }
      }
      
      .form-control.is-invalid:focus {
        animation: shake 0.5s ease;
      }
      
      /* Success checkmark animation */
      @keyframes checkmark {
        0% { transform: scale(0); }
        50% { transform: scale(1.2); }
        100% { transform: scale(1); }
      }
      
      .form-control:valid {
        border-color: var(--success-color);
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='%23059669' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='20 6 9 17 4 12'%3E%3C/polyline%3E%3C/svg%3E");
        background-repeat: no-repeat;
        background-position: right 1rem center;
        background-size: 20px;
        padding-right: 3rem;
      }
      
      .form-control:valid:focus {
        border-color: var(--success-color);
        box-shadow: 0 0 0 3px rgba(5, 150, 105, 0.1);
      }
    `;
    document.head.appendChild(style);