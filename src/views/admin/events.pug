extends ../layout/main

block content
  .container.py-4
    .d-flex.justify-content-between.align-items-center.mb-3
      div
        h1.fw-bold.mb-1 Kelola Event
        p.text-muted.mb-0
          | Manage semua event olahraga yang tampil di SPORTER.
      a.btn.btn-danger(href="/admin/events/create")
        i.bi.bi-plus-circle.me-1
        | Tambah Event

    if flash && flash.success && flash.success.length
      .alert.alert-success(role="alert")= flash.success[0]
    if flash && flash.error && flash.error.length
      .alert.alert-danger(role="alert")= flash.error[0]

    if events && events.length
      .card
        .card-body
          .table-responsive
            table.table.table-hover.align-middle
              thead
                tr
                  th ID
                  th Judul
                  th Cabang
                  th Venue
                  th Tanggal
                  th Status
                  th.text-end Aksi
              tbody
                each e in events
                  tr
                    td= e.id
                    td
                      strong= e.title
                      if e.slug
                        br
                        small.text-muted= e.slug
                    td= e.sport_name || '-'
                    td= e.venue_name || '-'
                    td
                      if e.start_date
                        - const start = new Date(e.start_date).toLocaleDateString('id-ID');
                        if e.end_date
                          - const end = new Date(e.end_date).toLocaleDateString('id-ID');
                          | #{start} - #{end}
                        else
                          | #{start}
                      else
                        | -
                    td
                      if e.status === 'upcoming'
                        span.badge.bg-success-subtle.text-success Akan Datang
                      else if e.status === 'ongoing'
                        span.badge.bg-primary-subtle.text-primary Berlangsung
                      else
                        span.badge.bg-secondary-subtle.text-secondary Selesai
                    td.text-end
                      a.btn.btn-sm.btn-outline-secondary.me-1(href=`/events/${e.slug || e.id}` target="_blank")
                        i.bi.bi-box-arrow-up-right
                      a.btn.btn-sm.btn-outline-primary.me-1(href=`/admin/events/${e.id}/edit`)
                        i.bi.bi-pencil
                      form.d-inline(method="post" action=`/admin/events/${e.id}/delete` onsubmit="return confirm('Yakin hapus event ini?');")
                        button.btn.btn-sm.btn-outline-danger(type="submit")
                          i.bi.bi-trash
    else
      .text-center.py-5
        h4.mb-2 Belum ada event
        p.text-muted.mb-3 Tambahkan event pertama untuk mulai mengisi kalender SPORTER.
        a.btn.btn-danger(href="/admin/events/create")
          i.bi.bi-plus-circle.me-1
          | Tambah Event
