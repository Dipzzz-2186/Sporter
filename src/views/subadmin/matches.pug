extends ../layout/main

block content
  style.
    /* Matches Management Page Styles */
    .matches-page {
      background: linear-gradient(135deg, #f5f7fa 0%, #e8ecf1 100%);
      min-height: 100vh;
      padding: 2rem 0;
    }
    
    /* Header Section */
    .matches-header {
      background: linear-gradient(135deg, #0B1F3F 0%, #152844 100%);
      border-radius: 24px;
      padding: 2rem;
      margin-bottom: 2rem;
      color: white;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
      animation: fadeInDown 0.6s ease-out;
    }
    
    @keyframes fadeInDown {
      from { opacity: 0; transform: translateY(-20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    .matches-header h1 {
      font-family: 'Bebas Neue', cursive;
      font-size: 2.5rem;
      letter-spacing: 1px;
      margin-bottom: 0.5rem;
      background: linear-gradient(135deg, #0095FF 0%, #34C7FF 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    
    .matches-header p {
      color: rgba(255, 255, 255, 0.7);
      font-size: 1rem;
      margin: 0;
    }
    .mode-chip{
      font-size:.7rem;
      font-weight:700;
      padding:.2rem .5rem;
      border-radius:999px;
      border:1px solid #e5e7eb;
      color:#374151;  
      background:#f9fafb;
    }

    
    .btn-add-match {
      background: linear-gradient(135deg, #0095FF 0%, #34C7FF 100%);
      border: none;
      color: white;
      padding: 0.8rem 1.5rem;
      border-radius: 12px;
      font-weight: 600;
      transition: all 0.3s ease;
      box-shadow: 0 4px 15px rgba(0, 149, 255, 0.3);
      text-decoration: none;
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
    }
    
    .btn-add-match:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 25px rgba(0, 149, 255, 0.4);
      color: white;
    }
    
    /* Alerts */
    .alert {
      border-radius: 12px;
      border: none;
      padding: 1rem 1.25rem;
      margin-bottom: 1.5rem;
      animation: slideInDown 0.4s ease-out;
      display: flex;
      align-items: center;
      gap: 0.75rem;
    }
    
    @keyframes slideInDown {
      from { opacity: 0; transform: translateY(-20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    .alert-danger {
      background: linear-gradient(135deg, #fee2e2 0%, #fecaca 100%);
      color: #991b1b;
      border-left: 4px solid #dc2626;
    }
    
    .alert-success {
      background: linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%);
      color: #065f46;
      border-left: 4px solid #059669;
    }
    
    .alert i {
      font-size: 1.2rem;
    }
    
    /* ========== FILTER SECTION STYLES ========== */
    .filter-card {
      background: white;
      border-radius: 18px;
      border: 2px solid #e8edf2;
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.05);
      margin-bottom: 2rem;
      animation: fadeInUp 0.6s ease-out 0.2s backwards;
      overflow: hidden;
    }
    
    .filter-card .card-header {
      background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
      border-bottom: 2px solid #e8edf2;
      padding: 1.25rem 1.5rem;
    }
    
    .filter-title {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      color: #0B1F3F;
      font-weight: 700;
      font-size: 1.1rem;
      margin: 0;
    }
    
    .filter-title i {
      background: linear-gradient(135deg, #0095FF 0%, #34C7FF 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      font-size: 1.3rem;
    }
    
    .filter-card .card-body {
      padding: 1.5rem;
    }
    
    .filter-form label {
      color: #0B1F3F;
      font-weight: 600;
      font-size: 0.9rem;
      margin-bottom: 0.5rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    
    .filter-form label i {
      color: #0095FF;
      font-size: 0.9rem;
    }
    
    .filter-form .form-select,
    .filter-form .form-control {
      border-radius: 10px;
      border: 2px solid #e8edf2;
      padding: 0.75rem 1rem;
      font-size: 0.95rem;
      transition: all 0.3s ease;
      background-color: white;
    }
    
    .filter-form .form-select:focus,
    .filter-form .form-control:focus {
      border-color: #0095FF;
      box-shadow: 0 0 0 0.2rem rgba(0, 149, 255, 0.15);
      outline: none;
    }
    
    .filter-form .form-select {
      background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3e%3cpath fill='none' stroke='%230B1F3F' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='m2 5 6 6 6-6'/%3e%3c/svg%3e");
      background-repeat: no-repeat;
      background-position: right 1rem center;
      background-size: 16px 12px;
    }
    
    .btn-filter {
      background: linear-gradient(135deg, #0095FF 0%, #34C7FF 100%);
      border: none;
      color: white;
      border-radius: 10px;
      padding: 0.75rem 1.5rem;
      font-weight: 600;
      font-size: 0.95rem;
      transition: all 0.3s ease;
      box-shadow: 0 4px 12px rgba(0, 149, 255, 0.25);
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
      width: 100%;
    }
    
    .btn-filter:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 18px rgba(0, 149, 255, 0.35);
      background: linear-gradient(135deg, #34C7FF 0%, #0095FF 100%);
      color: white;
    }
    
    .btn-filter:active {
      transform: translateY(0);
    }
    
    /* Table Card */
    .matches-table-card {
      background: white;
      border-radius: 20px;
      border: 2px solid #e8edf2;
      overflow: hidden;
      animation: fadeInUp 0.6s ease-out;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.05);
    }
    
    @keyframes fadeInUp {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    .matches-table-card .card-body {
      padding: 0;
    }
    
    /* Table Styles */
    .matches-table {
      margin: 0;
      font-size: 0.95rem;
    }
    
    .matches-table thead {
      background: linear-gradient(135deg, #0B1F3F 0%, #152844 100%);
    }
    
    .matches-table thead th {
      background: transparent !important; /* ikut parent */
      color: white !important;
      font-weight: 700;
      font-size: 0.85rem;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      padding: 1.25rem 1rem;
      border: none;
      white-space: nowrap;
    }
    
    .matches-table tbody tr {
      border-bottom: 1px solid #e8edf2;
      transition: all 0.3s ease;
    }
    
    .matches-table tbody tr:hover {
      background: linear-gradient(135deg, rgba(0, 149, 255, 0.05) 0%, rgba(52, 199, 255, 0.05) 100%);
      transform: translateX(5px);
    }
    
    .matches-table tbody td {
      padding: 1.25rem 1rem;
      vertical-align: middle;
      border: none;
    }
    
    .match-id {
      font-family: 'Bebas Neue', cursive;
      font-size: 1.5rem;
      color: #0095FF;
      letter-spacing: 0.5px;
    }
    
    .match-title {
      color: #0B1F3F;
      font-weight: 700;
      font-size: 1rem;
      margin-bottom: 0.25rem;
    }
    
    .match-event {
      color: #5a6c7d;
      font-size: 0.85rem;
    }
    
    .match-teams {
      color: #0B1F3F;
      font-weight: 600;
      font-size: 0.95rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    
    .match-teams .vs-badge {
      background: linear-gradient(135deg, #0095FF 0%, #34C7FF 100%);
      color: white;
      padding: 0.2rem 0.5rem;
      border-radius: 8px;
      font-size: 0.75rem;
      font-weight: 700;
    }
    
    .match-time {
      color: #0B1F3F;
      font-size: 0.9rem;
      line-height: 1.5;
    }
    
    .match-time small {
      color: #5a6c7d;
      display: block;
      margin-top: 0.25rem;
    }
    
    .sport-badge {
      background: linear-gradient(135deg, #f0f8ff 0%, #e0f2ff 100%);
      color: #0095FF;
      padding: 0.4rem 0.8rem;
      border-radius: 20px;
      font-weight: 600;
      font-size: 0.8rem;
      border: 1px solid #d6edff;
      display: inline-flex;
      align-items: center;
      gap: 0.4rem;
    }
    
    .sport-badge i {
      font-size: 0.9rem;
    }
    
    /* Status Badges */
    .status-badge {
      padding: 0.5rem 1rem;
      border-radius: 20px;
      font-weight: 600;
      font-size: 0.8rem;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      display: inline-flex;
      align-items: center;
      gap: 0.4rem;
    }
    
    .status-badge i {
      font-size: 1rem;
    }
    
    .status-scheduled {
      background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
      color: #92400e;
      border: 1px solid #fde68a;
    }
    
    .status-ongoing {
      background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%);
      color: #1e40af;
      border: 1px solid #bfdbfe;
    }
    
    .status-finished {
      background: linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%);
      color: #065f46;
      border: 1px solid #a7f3d0;
    }
    
    /* Action Buttons */
    .action-buttons {
      display: flex;
      gap: 0.5rem;
      justify-content: flex-end;
    }
    
    .btn-action {
      width: 36px;
      height: 36px;
      padding: 0;
      border-radius: 10px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      font-size: 0.9rem;
      border: 2px solid;
      transition: all 0.3s ease;
      cursor: pointer;
    }
    
    .btn-action-edit {
      background: white;
      border-color: #0095FF;
      color: #0095FF;
    }
    
    .btn-action-edit:hover {
      background: linear-gradient(135deg, #0095FF 0%, #34C7FF 100%);
      color: white;
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0, 149, 255, 0.3);
    }
    
    .btn-action-delete {
      background: white;
      border-color: #dc2626;
      color: #dc2626;
    }
    
    .btn-action-delete:hover {
      background: linear-gradient(135deg, #dc2626 0%, #ef4444 100%);
      color: white;
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(220, 38, 38, 0.3);
    }
    
    /* Empty State */
    .empty-state {
      background: white;
      border: 2px dashed #e8edf2;
      border-radius: 24px;
      padding: 5rem 2rem;
      text-align: center;
      animation: fadeInUp 0.6s ease-out;
    }
    
    .empty-state-icon {
      width: 120px;
      height: 120px;
      background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 auto 2rem;
      animation: float 3s ease-in-out infinite;
    }
    
    @keyframes float {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-15px); }
    }
    
    .empty-state-icon i {
      font-size: 4rem;
      color: #adb5bd;
    }
    
    .empty-state h4 {
      font-family: 'Bebas Neue', cursive;
      font-size: 2rem;
      color: #0B1F3F;
      letter-spacing: 1px;
      margin-bottom: 1rem;
    }
    
    .empty-state p {
      color: #5a6c7d;
      font-size: 1.05rem;
      margin-bottom: 2rem;
    }
    
    /* Responsive */
    @media (max-width: 991px) {
      .matches-header {
        padding: 1.5rem;
      }
      
      .matches-header h1 {
        font-size: 2rem;
      }
      
      .filter-card {
        border-radius: 16px;
      }
      
      .filter-card .card-body {
        padding: 1.25rem;
      }
      
      .matches-table {
        font-size: 0.85rem;
      }
      
      .matches-table thead th,
      .matches-table tbody td {
        padding: 1rem 0.75rem;
      }
    }
    
    @media (max-width: 767px) {
      .matches-page {
        padding: 1rem 0;
      }
      
      .matches-header {
        padding: 1.25rem;
        border-radius: 16px;
      }
      
      .matches-header h1 {
        font-size: 1.75rem;
      }
      
      .btn-add-match {
        width: 100%;
        justify-content: center;
        margin-top: 1rem;
      }
      
      .filter-card {
        margin-bottom: 1.5rem;
      }
      
      .filter-card .card-header {
        padding: 1rem 1.25rem;
      }
      
      .filter-title {
        font-size: 1rem;
      }
      
      .filter-card .card-body {
        padding: 1rem;
      }
      
      .filter-form .form-select,
      .filter-form .form-control {
        padding: 0.65rem 0.9rem;
        font-size: 0.9rem;
      }
      
      .btn-filter {
        padding: 0.65rem 1.25rem;
        font-size: 0.9rem;
      }
      
      .matches-table {
        font-size: 0.8rem;
      }
      
      .matches-table thead th,
      .matches-table tbody td {
        padding: 0.75rem 0.5rem;
      }
      
      .match-id {
        font-size: 1.2rem;
      }
      
      .action-buttons {
        flex-direction: column;
      }
      
      .btn-action {
        width: 100%;
      }
      
      .empty-state {
        padding: 3rem 1.5rem;
      }
      
      .empty-state-icon {
        width: 100px;
        height: 100px;
      }
      
      .empty-state-icon i {
        font-size: 3rem;
      }
      
      .empty-state h4 {
        font-size: 1.6rem;
      }
    }
    
    @media (max-width: 480px) {
      .filter-form .row {
        flex-direction: column;
        gap: 1rem;
      }
      
      .filter-form .col-md-4,
      .filter-form .col-md-3,
      .filter-form .col-md-2 {
        width: 100%;
        max-width: 100%;
      }
    }

  .matches-page
    .container
      //- Header Section - DIPERBAIKI
      .matches-header
        .d-flex.justify-content-between.align-items-start.mb-3
          h1.mb-0
            i.bi.bi-trophy-fill.me-2
            | #{isReadOnly ? 'Daftar Pertandingan' : 'Kelola Pertandingan'}
          
          - const backUrl = (currentUser && currentUser.role === 'admin') ? '/admin' : '/subadmin'
          a.btn.btn-secondary(href=backUrl)
            i.bi.bi-arrow-left.me-1
            | Kembali
        
        if !isReadOnly
          .mt-3
            a.btn-add-match(href="/subadmin/matches/create")
              i.bi.bi-plus-circle
              span Tambah Pertandingan

      //- Flash Messages
      if flash && flash.error && flash.error.length
        each msg in flash.error
          .alert.alert-danger(role="alert")
            i.bi.bi-exclamation-triangle-fill
            span= msg
      
      if flash && flash.success && flash.success.length
        each msg in flash.success
          .alert.alert-success(role="alert")
            i.bi.bi-check-circle-fill
            span= msg
      
      //- Filter Section - DIPERBAIKI
      .filter-card
        .card-header
          h5.filter-title
            i.bi.bi-funnel-fill
            | Filter Pertandingan
        
        .card-body
          form.filter-form(method="get")
            .row.g-3.align-items-end
              .col-md-4
                .mb-2
                  label.form-label
                    i.bi.bi-dribbble.me-1
                    | Cabang Olahraga
                  select.form-select(name="sport_id")
                    option(value="") Semua Cabang
                    each s in sports
                      option(
                        value=s.id
                        selected=(query && query.sport_id == s.id)
                      )= s.name
              
              .col-md-3
                .mb-2
                  label.form-label
                    i.bi.bi-sort-down.me-1
                    | Urutan
                  select.form-select(name="order")
                    option(
                      value="newest"
                      selected=(!query || query.order !== 'oldest')
                    ) Terbaru
                    option(
                      value="oldest"
                      selected=(query && query.order === 'oldest')
                    ) Terlama
            
              .col-md-2
                button.btn-filter(type="submit")
                  i.bi.bi-funnel-fill.me-1
                  | Terapkan

      //- Matches Table
      if matches && matches.length
        .card.matches-table-card.border-0
          .card-body
            .table-responsive
              table.table.matches-table.mb-0
                thead
                  tr
                    th
                      i.bi.bi-hash.me-1
                      | ID
                    th
                      i.bi.bi-dribbble.me-1
                      | Cabang
                    th
                      i.bi.bi-card-heading.me-1
                      | Detail Pertandingan
                    th
                      i.bi.bi-people-fill.me-1
                      | Peserta / Tim
                    th
                      i.bi.bi-clock.me-1
                      | Waktu
                    th
                      i.bi.bi-geo-alt.me-1
                      | Venue
                    th
                      i.bi.bi-info-circle.me-1
                      | Status
                    if !isReadOnly
                      th.text-end
                        i.bi.bi-gear.me-1
                        | Aksi
                tbody
                  each m in matches
                    tr
                      td
                        .match-id= m.id
                      
                      td
                        if m.sport_name
                          .sport-badge
                            i.bi.bi-trophy
                            span= m.sport_name
                        else
                          span.text-muted -
                      
                      td
                        .match-title= m.title || 'Tanpa judul'
                        if m.event_title
                          .match-event
                            i.bi.bi-calendar-event.me-1
                            = m.event_title
                      
                      td
                        - const isIndividual = (m.match_mode || '').toLowerCase() === 'individual';
                        - const fallbackNames = [m.home_team_name, m.away_team_name].filter(Boolean).join(', ');

                        if isIndividual
                          .match-teams
                            i.bi.bi-person-fill.me-2.text-muted
                            span= m.participants_names || fallbackNames || '-'
                            span.mode-chip.ms-2 INDIVIDUAL
                        else
                          if m.home_team_name || m.away_team_name
                            .match-teams
                              span= m.home_team_name || '-'
                              .vs-badge VS
                              span= m.away_team_name || '-'
                          else
                            span.text-muted -


                      
                      td
                        - const startStr = m.start_time ? new Date(m.start_time).toLocaleString('id-ID', { day: '2-digit', month: 'short', year: 'numeric', hour: '2-digit', minute: '2-digit' }) : null;
                        - const endStr = m.end_time ? new Date(m.end_time).toLocaleString('id-ID', { day: '2-digit', month: 'short', year: 'numeric', hour: '2-digit', minute: '2-digit' }) : null;
                        if startStr
                          .match-time
                            strong= startStr
                            if endStr
                              small
                                i.bi.bi-arrow-right.me-1
                                = endStr
                        else
                          span.text-muted Belum diatur
                      
                      td
                        if m.venue_name
                          span
                            i.bi.bi-geo-alt-fill.me-1.text-primary
                            = m.venue_name
                        else
                          span.text-muted -
                      
                      td
                        if m.status === 'scheduled'
                          .status-badge.status-scheduled
                            i.bi.bi-calendar-check
                            | Dijadwalkan
                        else if m.status === 'ongoing'
                          .status-badge.status-ongoing
                            i.bi.bi-broadcast
                            | Berlangsung
                        else if m.status === 'finished'
                          .status-badge.status-finished
                            i.bi.bi-check-circle
                            | Selesai
                        else
                          .status-badge
                            = m.status || 'N/A'
                      
                      if !isReadOnly
                        td
                          .action-buttons
                            if m.sport_name && m.sport_name.toLowerCase() === 'padel' && m.status !== 'finished'
                              button.btn.btn-sm.btn-primary(
                                type="button"
                                data-match-id=m.id
                                data-home=m.home_team_name
                                data-away=m.away_team_name
                                onclick="openScoreModal(this)"
                              )
                                i.bi.bi-pencil-square
                                | Input Skor
                            a.btn.btn-action.btn-action-edit(
                              href=`/subadmin/matches/${m.id}/edit`
                              title="Edit Pertandingan"
                            )
                              i.bi.bi-pencil-fill
                            
                            form.d-inline(
                              method="post" 
                              action=`/subadmin/matches/${m.id}/delete`
                              onsubmit="return confirm('Yakin ingin menghapus pertandingan ini?');"
                            )
                              button.btn.btn-action.btn-action-delete(
                                type="submit"
                                title="Hapus Pertandingan"
                              )
                                i.bi.bi-trash-fill
      else
        //- Empty State
        .empty-state
          .empty-state-icon
            i.bi.bi-calendar-x
          h4 Belum Ada Pertandingan
          p
            | Tambahkan pertandingan pertama untuk cabang olahraga yang kamu pegang.
            br
            | Mulai jadwalkan pertandingan sekarang!
          a.btn-add-match(href="/subadmin/matches/create")
            i.bi.bi-plus-circle
            span Tambah Pertandingan Pertama
  
  //- Modals
  if !isReadOnly
    #padelScoreModal.modal.fade(tabindex='-1')
      .modal-dialog
        .modal-content
          .modal-header
            h5.modal-title Input Skor Padel
            button.btn-close(type='button', data-bs-dismiss='modal')

          .modal-body
            small.text-muted
              | Bingung cara isi?
              a.ms-1(
                href="#"
                data-bs-dismiss="modal"
                data-bs-toggle="modal"
                data-bs-target="#guideModal"
              ) Lihat panduan
            input(type="hidden" id="matchId")

            .mb-3
              label.form-label#homeLabel
              input.form-control(type="number" id="homeScore" min="0")

            .mb-3
              label.form-label#awayLabel
              input.form-control(type="number" id="awayScore" min="0")

          .modal-footer
            button.btn.btn-secondary(data-bs-dismiss='modal') Batal
            button.btn.btn-primary(type="button" onclick="submitPadelScore()") Simpan

    #guideModal.modal.fade(tabindex='-1')
      .modal-dialog.modal-lg.modal-dialog-centered
        .modal-content
          .modal-header
            h5.modal-title
              i.bi.bi-question-circle-fill.me-2
              | Panduan Input Skor Padel
            button.btn-close(type='button', data-bs-dismiss='modal')

          .modal-body
            h6.text-primary.mb-2 1. Apa itu Game Menang & Game Kalah?
            p.mb-3
              | Game Menang adalah jumlah game yang dimenangkan tim.
              | Game Kalah adalah jumlah game yang kalah dari lawan.

            h6.text-primary.mb-2 2. Contoh Pengisian yang Benar
            ul
              li Tim A menang 6‚Äì4 ‚Üí isi:
                ul
                  li Game Menang: <b>6</b>
                  li Game Kalah: <b>4</b>
              li Tim kalah 3‚Äì6 ‚Üí isi:
                ul
                  li Game Menang: <b>3</b>
                  li Game Kalah: <b>6</b>

            h6.text-danger.mb-2 3. Aturan Penting
            ul
              li ‚ùå Game Menang dan Game Kalah <b>tidak boleh sama</b>
              li ‚úÖ Tim dengan angka lebih besar otomatis dianggap menang
              li üèÜ Menang mendapat <b>3 poin</b>, kalah <b>0 poin</b>

            h6.text-primary.mb-2 4. Yang Dihitung Sistem
            ul
              li Jumlah Match diambil dari <b>jadwal pertandingan</b>
              li Poin & klasemen dihitung otomatis
              li Tidak perlu input poin manual

            .alert.alert-warning.mt-3
              i.bi.bi-exclamation-triangle-fill.me-2
              | Pastikan skor sudah benar sebelum disimpan. Saat ini skor tidak bisa di-edit ulang.

          .modal-footer
            button.btn.btn-secondary(data-bs-dismiss='modal') Tutup

  if !isReadOnly
    script.
      (function() {
        // Auto dismiss alerts after 5 seconds
        var alerts = document.querySelectorAll('.alert');
        alerts.forEach(function(alert) {
          setTimeout(function() {
            alert.style.transition = 'opacity 0.5s ease, transform 0.5s ease';
            alert.style.opacity = '0';
            alert.style.transform = 'translateY(-20px)';
            setTimeout(function() {
              alert.remove();
            }, 500);
          }, 5000);
        });
        
        // Confirm delete with better UX
        var deleteForms = document.querySelectorAll('form[action*="/delete"]');
        deleteForms.forEach(function(form) {
          form.addEventListener('submit', function(e) {
            e.preventDefault();
            
            var btn = form.querySelector('button[type="submit"]');
            var confirmed = confirm('‚ö†Ô∏è Yakin ingin menghapus pertandingan ini?\n\nData yang sudah dihapus tidak dapat dikembalikan.');
            
            if (confirmed) {
              btn.innerHTML = '<span class="spinner-border spinner-border-sm"></span>';
              btn.disabled = true;
              form.submit();
            }
          });
        });
        
        // Intersection Observer for table rows
        if ('IntersectionObserver' in window) {
          var observer = new IntersectionObserver(function(entries) {
            entries.forEach(function(entry, index) {
              if (entry.isIntersecting) {
                setTimeout(function() {
                  entry.target.style.opacity = '1';
                  entry.target.style.transform = 'translateX(0)';
                }, index * 50);
              }
            });
          }, {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
          });
          
          document.querySelectorAll('.matches-table tbody tr').forEach(function(row) {
            row.style.opacity = '0';
            row.style.transform = 'translateX(-20px)';
            row.style.transition = 'all 0.4s ease';
            observer.observe(row);
          });
        }
      })();

    script.
      function openScoreModal(btn) {
        document.getElementById('matchId').value = btn.dataset.matchId;
        document.getElementById('homeLabel').innerText = btn.dataset.home;
        document.getElementById('awayLabel').innerText = btn.dataset.away;
        document.getElementById('homeScore').value = 0;
        document.getElementById('awayScore').value = 0;

        new bootstrap.Modal(document.getElementById('padelScoreModal')).show();
      }

      function submitPadelScore() {
        const matchId = document.getElementById('matchId').value;
        const home = Number(document.getElementById('homeScore').value);
        const away = Number(document.getElementById('awayScore').value);

        if (home === away) {
          alert('Skor tidak boleh seri');
          return;
        }

        fetch(`/subadmin/matches/${matchId}/submit-score`, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ home_score: home, away_score: away })
        })
        .then(res => res.json())
        .then(() => location.reload());
      }