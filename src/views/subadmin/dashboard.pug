extends ../layout/main

block content
  style.
    /* Dashboard Hero */
    .dashboard-hero {
      background: linear-gradient(135deg, #1C1C1E 0%, #2c2c2e 100%);
      padding: 3rem 0 2rem;
      position: relative;
      overflow: hidden;
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.15);
      margin-bottom: 2rem;
    }
    
    .dashboard-hero::before {
      content: '';
      position: absolute;
      top: -30%;
      right: -10%;
      width: 600px;
      height: 600px;
      background: radial-gradient(circle, rgba(255, 255, 255, 0.1) 0%, transparent 70%);
      border-radius: 50%;
      pointer-events: none;
    }
    
    .dashboard-hero::after {
      content: '';
      position: absolute;
      bottom: -20%;
      left: -10%;
      width: 400px;
      height: 400px;
      background: radial-gradient(circle, rgba(16, 185, 129, 0.08) 0%, transparent 70%);
      border-radius: 50%;
      pointer-events: none;
    }
    
    .hero-content {
      position: relative;
      z-index: 2;
    }
    
    /* User Greeting */
    .user-greeting {
      font-size: 2.5rem;
      font-weight: 700;
      color: white;
      margin-bottom: 0.75rem;
      text-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
      animation: fadeInUp 0.6s ease-out;
    }
    
    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    /* Role Badge */
    .user-role-badge {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      background: rgba(255, 255, 255, 0.2);
      backdrop-filter: blur(10px);
      padding: 0.5rem 1rem;
      border-radius: 20px;
      color: white;
      font-weight: 600;
      font-size: 0.95rem;
      border: 1px solid rgba(255, 255, 255, 0.3);
      margin-bottom: 1rem;
      animation: fadeInUp 0.8s ease-out;
    }
    
    .user-role-badge i {
      font-size: 1.1rem;
    }
    
    /* Assigned Sports */
    .assigned-sports {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      margin-top: 1rem;
      animation: fadeInUp 1s ease-out;
    }
    
    .sport-pill {
      background: linear-gradient(135deg, rgba(255, 255, 255, 0.25) 0%, rgba(255, 255, 255, 0.15) 100%);
      backdrop-filter: blur(10px);
      color: white;
      padding: 0.5rem 1rem;
      border-radius: 20px;
      font-size: 0.9rem;
      font-weight: 500;
      border: 1px solid rgba(255, 255, 255, 0.3);
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      transition: all 0.3s ease;
    }
    
    .sport-pill:hover {
      background: linear-gradient(135deg, rgba(255, 255, 255, 0.35) 0%, rgba(255, 255, 255, 0.25) 100%);
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
    }
    
    .sport-pill::before {
      content: 'üèÜ';
      font-size: 1rem;
    }
    
    /* No Sports Text */
    .no-sports-text {
      color: rgba(255, 255, 255, 0.7);
      font-size: 0.9rem;
      font-style: italic;
      margin-top: 0.5rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    
    .no-sports-text i {
      font-size: 1rem;
    }
    
    /* Hero Description */
    .hero-description {
      color: rgba(255, 255, 255, 0.9);
      font-size: 1.05rem;
      margin-top: 1rem;
      margin-bottom: 0;
      line-height: 1.6;
      animation: fadeInUp 1.2s ease-out;
    }
    
    @keyframes fadeInRight {
      from {
        opacity: 0;
        transform: translateX(20px);
      }
      to {
        opacity: 1;
        transform: translateX(0);
      }
    }
    
    .admin-area-btn:hover {
      background: #f8fafc;
      color: #1e3a8a;
      transform: translateY(-3px);
      box-shadow: 0 8px 30px rgba(0, 0, 0, 0.3);
      text-decoration: none;
    }
    
    .admin-area-btn i {
      font-size: 1.2rem;
    }
    
    /* Quick Actions */
    .quick-actions {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 1rem;
      margin-top: 2rem;
      position: relative;
      z-index: 2;
    }
    
    .action-btn {
      background: white;
      border: none;
      border-radius: 16px;
      padding: 1.25rem 1.5rem;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 0.75rem;
      text-decoration: none;
      transition: all 0.3s ease;
      box-shadow: 0 5px 20px rgba(0, 0, 0, 0.15);
      position: relative;
      overflow: hidden;
    }
    
    .action-btn::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 4px;
      background: currentColor;
      transform: scaleX(0);
      transform-origin: left;
      transition: transform 0.3s ease;
    }
    
    .action-btn:hover::before {
      transform: scaleX(1);
    }
    
    .action-btn:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.25);
      text-decoration: none;
    }
    
    .action-btn i {
      font-size: 2rem;
      color: currentColor;
    }
    
    .action-btn span {
      font-weight: 600;
      font-size: 0.95rem;
      color: #1C1C1E;
      text-align: center;
    }
    
    /* Action Button Colors */
    .action-btn-success { color: #10B981; }
    .action-btn-warning { color: #F59E0B; }
    .action-btn-info { color: #3B82F6; }
    .action-btn-danger { color: #EF4444; }
    
    /* Animation delays for quick actions */
    .action-btn:nth-child(1) { animation: fadeInUp 0.6s ease-out 0.2s backwards; }
    .action-btn:nth-child(2) { animation: fadeInUp 0.6s ease-out 0.3s backwards; }
    .action-btn:nth-child(3) { animation: fadeInUp 0.6s ease-out 0.4s backwards; }
    .action-btn:nth-child(4) { animation: fadeInUp 0.6s ease-out 0.5s backwards; }
    
    /* Stats Cards */
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
      gap: 1rem;
      margin-bottom: 2rem;
    }
    
    .stat-card {
      background: white;
      border-radius: 18px;
      padding: 1.5rem;
      transition: all 0.3s ease;
      border: 1px solid #f0f0f0;
      position: relative;
      overflow: hidden;
      animation: fadeInUp 0.6s ease-out backwards;
    }
    
    .stat-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
      border-color: #3B82F6;
    }
    
    .stat-icon {
      width: 50px;
      height: 50px;
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: 1rem;
      font-size: 1.5rem;
      color: white;
    }
    
    .stat-icon-sports { background: linear-gradient(135deg, #8B5CF6 0%, #7C3AED 100%); }
    .stat-icon-events { background: linear-gradient(135deg, #10B981 0%, #059669 100%); }
    .stat-icon-matches { background: linear-gradient(135deg, #3B82F6 0%, #1D4ED8 100%); }
    .stat-icon-videos { background: linear-gradient(135deg, #EF4444 0%, #DC2626 100%); }
    .stat-icon-livestreams { background: linear-gradient(135deg, #F59E0B 0%, #D97706 100%); }
    .stat-icon-tickets { background: linear-gradient(135deg, #06B6D4 0%, #0891B2 100%); }
    
    .stat-value {
      font-size: 2rem;
      font-weight: 700;
      color: #1C1C1E;
      line-height: 1;
      margin-bottom: 0.25rem;
    }
    
    .stat-label {
      color: #6c757d;
      font-size: 0.9rem;
      margin: 0;
    }
    
    /* Animation delays for stats */
    .stat-card:nth-child(1) { animation-delay: 0.1s; }
    .stat-card:nth-child(2) { animation-delay: 0.2s; }
    .stat-card:nth-child(3) { animation-delay: 0.3s; }
    .stat-card:nth-child(4) { animation-delay: 0.4s; }
    .stat-card:nth-child(5) { animation-delay: 0.5s; }
    .stat-card:nth-child(6) { animation-delay: 0.6s; }
    
    /* Content Sections */
    .dashboard-section {
      margin-bottom: 2rem;
    }
    
    .section-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1.5rem;
      padding-bottom: 0.75rem;
      border-bottom: 2px solid #f0f0f0;
    }
    
    .section-title {
      font-size: 1.5rem;
      font-weight: 700;
      color: #1C1C1E;
      display: flex;
      align-items: center;
      gap: 0.5rem;
      margin: 0;
    }
    
    .section-title i {
      color: #3B82F6;
    }
    
    /* Table Styling */
    .dashboard-table {
      background: white;
      border-radius: 18px;
      overflow: hidden;
      border: 1px solid #f0f0f0;
      box-shadow: 0 5px 20px rgba(0, 0, 0, 0.05);
    }
    
    .dashboard-table .table {
      margin-bottom: 0;
    }
    
    .dashboard-table thead th {
      background: #f8fafc;
      border-bottom: 2px solid #e2e8f0;
      font-weight: 600;
      color: #4b5563;
      padding: 1rem 1.25rem;
      font-size: 0.9rem;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    
    .dashboard-table tbody td {
      padding: 1rem 1.25rem;
      vertical-align: middle;
      border-bottom: 1px solid #f1f5f9;
    }
    
    .dashboard-table tbody tr {
      transition: background-color 0.3s ease;
    }
    
    .dashboard-table tbody tr:hover {
      background-color: #f8fafc;
    }
    
    .match-title {
      font-weight: 600;
      color: #1C1C1E;
      margin-bottom: 0.25rem;
    }
    
    .match-subtitle {
      font-size: 0.85rem;
      color: #6c757d;
    }
    
    .date-badge {
      background: #f8fafc;
      padding: 0.4rem 0.8rem;
      border-radius: 10px;
      font-size: 0.85rem;
      color: #4b5563;
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      border: 1px solid #e2e8f0;
    }
    
    .ticket-badge {
      padding: 0.35rem 0.75rem;
      border-radius: 20px;
      font-size: 0.8rem;
      font-weight: 600;
    }
    
    .ticket-sold-out {
      background: rgba(239, 68, 68, 0.1);
      color: #dc2626;
    }
    
    .ticket-disabled {
      background: rgba(107, 114, 128, 0.1);
      color: #6b7280;
    }
    
    .ticket-available {
      background: rgba(34, 197, 94, 0.1);
      color: #16a34a;
    }
    
    /* Quick Buy Form */
    .quick-buy-form {
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    
    .quantity-input {
      width: 70px;
      padding: 0.35rem 0.5rem;
      border: 1px solid #e2e8f0;
      border-radius: 8px;
      font-size: 0.9rem;
      text-align: center;
    }
    
    .buy-btn {
      background: linear-gradient(135deg, #3B82F6 0%, #1D4ED8 100%);
      color: white;
      border: none;
      padding: 0.4rem 0.9rem;
      border-radius: 8px;
      font-size: 0.85rem;
      font-weight: 500;
      transition: all 0.3s ease;
    }
    
    .buy-btn:hover {
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
    }
    
    /* Sidebar Cards */
    .sidebar-card {
      background: white;
      border-radius: 18px;
      border: 1px solid #f0f0f0;
      overflow: hidden;
      margin-bottom: 1.5rem;
      box-shadow: 0 5px 20px rgba(0, 0, 0, 0.05);
      transition: all 0.3s ease;
    }
    
    .sidebar-card:hover {
      transform: translateY(-3px);
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
    }
    
    .sidebar-card-header {
      background: #f8fafc;
      padding: 1rem 1.25rem;
      border-bottom: 1px solid #e2e8f0;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .sidebar-card-header h6 {
      margin: 0;
      font-weight: 600;
      color: #1C1C1E;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    
    .sidebar-list {
      list-style: none;
      padding: 0;
      margin: 0;
    }
    
    .sidebar-list-item {
      padding: 1rem 1.25rem;
      border-bottom: 1px solid #f1f5f9;
      transition: all 0.3s ease;
    }
    
    .sidebar-list-item:hover {
      background: #f8fafc;
    }
    
    .sidebar-list-item:last-child {
      border-bottom: none;
    }
    
    .sidebar-list-item a {
      color: #1C1C1E;
      text-decoration: none;
      font-weight: 500;
      display: block;
      transition: color 0.3s ease;
    }
    
    .sidebar-list-item a:hover {
      color: #3B82F6;
    }
    
    .livestream-item {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
    }
    
    .livestream-title {
      font-weight: 600;
      color: #1C1C1E;
      margin: 0;
    }
    
    .livestream-meta {
      font-size: 0.85rem;
      color: #6c757d;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    
    .livestream-sport {
      background: rgba(59, 130, 246, 0.1);
      color: #3B82F6;
      padding: 0.2rem 0.5rem;
      border-radius: 12px;
      font-size: 0.8rem;
    }
    
    .livestream-btn {
      margin-top: 0.5rem;
    }
    
    /* Empty States */
    .empty-state {
      padding: 2rem;
      text-align: center;
      color: #6c757d;
    }
    
    .empty-state-icon {
      width: 60px;
      height: 60px;
      background: #f8fafc;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 auto 1rem;
      color: #94a3b8;
      font-size: 1.5rem;
    }
    
    /* Responsive */
    @media (max-width: 768px) {
      .dashboard-hero {
        padding: 2rem 0 1.5rem;
      }
      
      .user-greeting {
        font-size: 1.75rem;
      }
      
      .quick-actions {
        grid-template-columns: repeat(2, 1fr);
        gap: 0.75rem;
      }
      
      .action-btn {
        padding: 1rem;
      }
      
      .action-btn i {
        font-size: 1.5rem;
      }
      
      .action-btn span {
        font-size: 0.85rem;
      }
      
      .admin-area-btn {
        width: 100%;
        justify-content: center;
        margin-top: 1rem;
      }
      
      .stats-grid {
        grid-template-columns: repeat(2, 1fr);
      }
      
      .section-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 0.75rem;
      }
      
      .dashboard-table {
        overflow-x: auto;
      }
      
      .quick-buy-form {
        flex-direction: column;
        align-items: stretch;
      }
      
      .quantity-input,
      .buy-btn {
        width: 100%;
      }
    }
    
    @media (max-width: 480px) {
      .quick-actions {
        grid-template-columns: 1fr;
      }
      
      .stats-grid {
        grid-template-columns: 1fr;
      }
    }

  // Dashboard Hero Section
  .dashboard-hero
    .container
      .hero-content
        .row.align-items-center
          .col-md-8
            h1.user-greeting= "Halo, " + (currentUser && currentUser.name ? currentUser.name : 'SubAdmin')
            
            .user-role-badge
              i.bi.bi-shield-check
              | SubAdmin Dashboard

            if assignedSports && assignedSports.length
              .assigned-sports
                each sport in assignedSports
                  .sport-pill= sport.name
            else
              .no-sports-text
                i.bi.bi-info-circle
                span Belum ada cabang olahraga yang ditugaskan

            p.hero-description Kelola event, jadwal, dan konten untuk cabang olahraga Anda
      
      .quick-actions
        a.action-btn.action-btn-success(href="/subadmin/matches/create")
          i.bi.bi-calendar-plus
          span Jadwal Pertandingan
        
        a.action-btn.action-btn-info(href="/subadmin/teams")
          i.bi.bi-people-fill
          span Kelola Tim
        
        a.action-btn.action-btn-warning(href="/subadmin/news/create")
          i.bi.bi-newspaper
          span Buat Berita
        
        a.action-btn.action-btn-info(href="/subadmin/videos/create")
          i.bi.bi-play-btn-fill
          span Tambah Video
        
        a.action-btn.action-btn-danger(href="/subadmin/livestreams/create")
          i.bi.bi-broadcast
          span Tambah Livestream
          
        a.action-btn.action-btn-info(href="/subadmin/standings")
          i.bi.bi-bar-chart-line-fill
          span Lihat Klasemen
        a.action-btn.action-btn-info(href="/subadmin/ticket-orders")
          i.bi.bi-receipt
          span Order Tiket
  .container
    // Stats Overview Section
    .stats-grid
      .stat-card
        .stat-icon.stat-icon-sports
          i.bi.bi-trophy
        .stat-value= stats.sports || 0
        .stat-label Cabang Olahraga
      
      .stat-card
        .stat-icon.stat-icon-events
          i.bi.bi-calendar-event
        .stat-value= stats.events || 0
        .stat-label Event
      
      .stat-card
        .stat-icon.stat-icon-matches
          i.bi.bi-calendar-check
        .stat-value= stats.matches || 0
        .stat-label Pertandingan
      
      .stat-card
        .stat-icon.stat-icon-videos
          i.bi.bi-play-btn
        .stat-value= stats.videos || 0
        .stat-label Video
      
      .stat-card
        .stat-icon.stat-icon-livestreams
          i.bi.bi-broadcast
        .stat-value= stats.livestreams || 0
        .stat-label Livestreams
      
      .stat-card
        a(href="/subadmin/standings" style="text-decoration:none; color:inherit; display:block;")
          .stat-icon.stat-icon-matches
            i.bi.bi-trophy
          .stat-value= (typeof stats !== 'undefined' && stats.standingsCount) ? stats.standingsCount : '-'
          .stat-label Klasemen
          // small link button
          .mt-2
            a.btn.btn-sm.btn-outline-primary(href="/subadmin/standings")
              i.bi.bi-list-ul.me-1
              | Buka Klasemen

    .row.g-4
      // Main Content - Upcoming Matches
      .col-lg-8
        .dashboard-section
          .section-header
            h2.section-title
              i.bi.bi-calendar-event
              | Jadwal Mendatang

            .d-flex.align-items-center.gap-2
              a.btn.btn-sm.btn-outline-primary(href="/subadmin/matches")
                i.bi.bi-list-ul.me-1
                | Kelola
              a.btn.btn-sm.btn-primary(href="/subadmin/matches/create")
                i.bi.bi-plus-lg.me-1
                | Buat
            
          .dashboard-table
            .table-responsive
              table.table.table-hover.mb-0
                thead
                  tr
                    th Match / Event
                    th Cabang
                    th Tanggal
                    th Tiket
                    th Aksi
                tbody
                  if upcomingMatches && upcomingMatches.length
                    each match in upcomingMatches
                      - const startTime = new Date(match.start_time || match.start_date || null)
                      tr
                        td
                          .match-title= match.title || (match.home_team_name ? (match.home_team_name + " vs " + (match.away_team_name||'-')) : 'Match')
                          if match.match_title
                            .match-subtitle= match.match_title
                        td= match.sport_name || '-'
                        td
                          .date-badge
                            i.bi.bi-calendar3
                            = startTime.toLocaleDateString('id-ID')
                          .text-muted.small.mt-1
                            i.bi.bi-clock
                            = ' ' + startTime.toLocaleTimeString('id-ID', { hour: '2-digit', minute: '2-digit' })
                        td
                          if match.ticket_available === 0
                            span.ticket-badge.ticket-sold-out Sold out
                          else if !match.can_buy
                            span.ticket-badge.ticket-disabled Disabled
                          else
                            span.ticket-badge.ticket-available= match.ticket_available + " tersedia"
                        td
                          if match.can_buy
                            form.quick-buy-form(method="post" action="/purchase/buy")
                              input(type="hidden" name="ticket_type_id" value=match.default_ticket_type_id)
                              input.quantity-input.form-control.form-control-sm(
                                type="number" 
                                name="quantity" 
                                min="1" 
                                max=match.ticket_available 
                                value="1"
                              )
                              button.buy-btn.btn-sm(type="submit")
                                i.bi.bi-cart3.me-1
                                | Beli
                          else
                            button.btn.btn-sm.btn-outline-secondary(disabled)
                              i.bi.bi-slash-circle.me-1
                              | Tidak Tersedia
                  else
                    tr
                      td(colspan="5")
                        .empty-state
                          .empty-state-icon
                            i.bi.bi-calendar-x
                          p.mb-0 Tidak ada jadwal mendatang untuk cabang yang Anda kelola.

      // Sidebar Content
      .col-lg-4
        // Recent News Card
        .sidebar-card
          .sidebar-card-header
            h6.mb-0
              i.bi.bi-newspaper.me-2
              | Berita Terbaru
            .d-flex.align-items-center.gap-2
              a.btn.btn-sm.btn-outline-primary(href="/subadmin/news")
                i.bi.bi-list-ul
              a.btn.btn-sm.btn-primary(href="/subadmin/news/create")
                i.bi.bi-plus-lg

          ul.sidebar-list
            if recentNews && recentNews.length
              each newsItem in recentNews
                li.sidebar-list-item
                  a(href=`/news/${newsItem.slug}`)
                    = newsItem.title
                    small.text-muted.d-block.mt-1
                      i.bi.bi-clock.me-1
                      = (new Date(newsItem.created_at || newsItem.published_at)).toLocaleDateString('id-ID')
            else
              li.sidebar-list-item
                .empty-state.py-3
                  .empty-state-icon.mb-2
                    i.bi.bi-newspaper
                  p.mb-0.text-muted Belum ada berita

        // Recent Videos Card
        .sidebar-card
          .sidebar-card-header
            h6.mb-0
              i.bi.bi-play-btn.me-2
              | Video Terbaru
            .d-flex.align-items-center.gap-2
              a.btn.btn-sm.btn-outline-primary(href="/subadmin/videos")
                i.bi.bi-list-ul
              a.btn.btn-sm.btn-primary(href="/subadmin/videos/create")
                i.bi.bi-plus-lg

          ul.sidebar-list
            if recentVideos && recentVideos.length
              each video in recentVideos
                li.sidebar-list-item
                  a(href=`/videos/${video.id}`)
                    = video.title
                    small.text-muted.d-block.mt-1
                      i.bi.bi-film.me-1
                      = video.sport_name || '-'
            else
              li.sidebar-list-item
                .empty-state.py-3
                  .empty-state-icon.mb-2
                    i.bi.bi-play-btn

        // Livestream Card
        .sidebar-card
          .sidebar-card-header
            h6.mb-0
              i.bi.bi-broadcast.me-2
              | Livestream
            .d-flex.align-items-center.gap-2
              a.btn.btn-sm.btn-outline-primary(href="/subadmin/livestreams")
                i.bi.bi-list-ul
              a.btn.btn-sm.btn-primary(href="/subadmin/livestreams/create")
                i.bi.bi-plus-lg

          ul.sidebar-list
            if upcomingLivestreams && upcomingLivestreams.length
              each livestream in upcomingLivestreams
                li.sidebar-list-item
                  .livestream-item
                    .livestream-title= livestream.title
                    .livestream-meta
                      span.livestream-sport= livestream.sport_name || '-'
                      i.bi.bi-clock.me-1
                      = (new Date(livestream.start_time || livestream.created_at)).toLocaleDateString('id-ID')
                    a.btn.btn-sm.btn-outline-primary.livestream-btn(href=`/livestreams/${livestream.id}`)
                      i.bi.bi-eye.me-1
                      | Tonton
            else
              li.sidebar-list-item
                .empty-state.py-3
                  .empty-state-icon.mb-2
                    i.bi.bi-broadcast
                  p.mb-0.text-muted Belum ada livestream