extends ../layout/main

block content
  style.
    .profile-page {
      background: linear-gradient(135deg, #f5f8fa 0%, #e9eef3 100%);
      min-height: 100vh;
      padding: 2.5rem 0;
    }
    .profile-card {
      background: #fff;
      border: 1px solid #e8edf2;
      border-radius: 16px;
      box-shadow: 0 2px 8px rgba(0,0,0,.04);
      overflow: hidden;
    }
    .profile-header {
      background: linear-gradient(135deg, #0B1F3F 0%, #152844 100%);
      padding: 2rem;
      color: #fff;
      position: relative;
      overflow: hidden;
    }
    .profile-header::before {
      content:'';
      position:absolute;
      top:-50%;
      right:-20%;
      width:420px;
      height:420px;
      border-radius:50%;
      background: radial-gradient(circle, rgba(0,149,255,.18) 0%, transparent 70%);
    }
    .avatar {
      width: 80px;
      height: 80px;
      border-radius: 16px;
      background: rgba(255,255,255,.1);
      border: 2px solid rgba(255,255,255,.15);
      display:flex;
      align-items:center;
      justify-content:center;
      font-size: 1.8rem;
      font-weight: 700;
      letter-spacing: 1px;
      flex-shrink: 0;
    }
    .profile-name {
      font-family: 'Bebas Neue', cursive;
      font-size: 2rem;
      letter-spacing: 1px;
      margin: 0;
      line-height: 1.2;
    }
    .profile-sub {
      margin: .4rem 0 0;
      opacity: .85;
      font-size: .9rem;
    }
    .profile-sub b {
      font-weight: 600;
      text-transform: capitalize;
    }
    .profile-body { 
      padding: 2rem; 
    }
    .info-row {
      display:flex;
      align-items: center;
      gap:1rem;
      padding: 1rem 0;
      border-bottom: 1px solid #f0f4f8;
    }
    .info-row:last-child { 
      border-bottom:none;
    }
    .info-ico {
      width: 44px;
      height: 44px;
      border-radius: 12px;
      background: linear-gradient(135deg, #f0f8ff 0%, #e0f2ff 100%);
      border: 1px solid #d6edff;
      display:flex;
      align-items:center;
      justify-content:center;
      color: #0095FF;
      flex-shrink:0;
    }
    .info-content {
      flex: 1;
      min-width: 0;
    }
    .info-title { 
      font-weight: 600; 
      color:#0B1F3F; 
      margin:0 0 .2rem 0;
      font-size: .85rem;
    }
    .info-val { 
      margin:0; 
      color:#5a6c7d;
      font-size: .95rem;
    }
    .section-title {
      font-weight: 700;
      color: #0B1F3F;
      margin: 0 0 1rem 0;
      font-size: 1rem;
    }
    .action-grid { 
      display:flex;
      flex-direction: column;
      gap:.75rem;
    }
    .action-btn {
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:1rem;
      padding: .95rem 1.1rem;
      border-radius: 12px;
      text-decoration:none;
      border: 1px solid #e8edf2;
      background:#fff;
      color:#5a6c7d;
      font-weight:600;
      transition: all .2s ease;
      font-size: .9rem;
    }
    .action-btn:hover {
      border-color:#0095FF;
      color:#0095FF;
      transform: translateX(3px);
    }
    .action-left { 
      display:flex; 
      align-items:center; 
      gap:.75rem; 
    }
    .action-left i { 
      font-size: 1.1rem; 
      width: 20px; 
      text-align:center; 
    }
    .action-btn .bi-chevron-right {
      font-size: .9rem;
      opacity: .5;
    }
    .action-btn:hover .bi-chevron-right {
      opacity: .8;
    }
    
    .alert {
      border-radius: 12px;
      border: none;
      padding: .9rem 1.1rem;
      margin-bottom: 1.5rem;
      font-weight: 500;
      font-size: .9rem;
    }
    .alert-danger {
      background: #fff5f5;
      color: #c53030;
      border-left: 3px solid #fc8181;
    }
    .alert-success {
      background: #f0fff4;
      color: #276749;
      border-left: 3px solid #68d391;
    }

    @media (max-width: 991px) {
      .profile-page {
        padding: 2rem 0;
      }
    }
    
    @media (max-width: 575px) {
      .profile-page {
        padding: 1.5rem 0;
      }
      .profile-header,
      .profile-body {
        padding: 1.5rem;
      }
      .avatar {
        width: 70px;
        height: 70px;
        font-size: 1.6rem;
      }
      .profile-name {
        font-size: 1.8rem;
      }
    }

  .profile-page
    .container
      if messages && messages.error && messages.error.length
        .alert.alert-danger= messages.error[0]
      if messages && messages.success && messages.success.length
        .alert.alert-success= messages.success[0]

      .row.g-4
        .col-lg-8
          .profile-card
            .profile-header
              .d-flex.align-items-center.gap-3.position-relative(style="z-index:2;")
                - const initials = (user && user.name) ? user.name.trim().split(/\s+/).slice(0,2).map(w => w[0].toUpperCase()).join('') : 'U';
                .avatar= initials
                div
                  h1.profile-name= (user && user.name) ? user.name : 'User'
                  p.profile-sub.mb-0
                    i.bi.bi-person-badge.me-2
                    | Role:
                    b.ms-1= (user && user.role) ? user.role : 'user'

            .profile-body
              .info-row
                .info-ico
                  i.bi.bi-envelope-fill
                .info-content
                  p.info-title Email
                  p.info-val= (user && user.email) ? user.email : '-'

              .info-row
                .info-ico
                  i.bi.bi-shield-lock-fill
                .info-content
                  p.info-title Status Login
                  p.info-val Aktif (session)

              .info-row
                .info-ico
                  i.bi.bi-clock-history
                .info-content
                  p.info-title Terakhir Update
                  p.info-val= (user && user.updated_at) ? user.updated_at : 'â€”'

        .col-lg-4
          .profile-card
            .profile-body
              h5.section-title Aksi Cepat

              .action-grid
                a.action-btn(href="/profile/password")
                  span.action-left
                    i.bi.bi-key-fill
                    span Ganti Password
                  i.bi.bi-chevron-right

                a.action-btn(href="/me/favorites")
                  span.action-left
                    i.bi.bi-bookmark-heart
                    span Disimpan (Favorites)
                  i.bi.bi-chevron-right
                
                a.action-btn(href="/profile/tickets")
                  span.action-left
                    i.bi.bi-ticket-detailed-fill
                    span Tiket Saya
                  i.bi.bi-chevron-right

                a.action-btn(href="/logout")
                  span.action-left
                    i.bi.bi-box-arrow-right
                    span Logout
                  i.bi.bi-chevron-right
