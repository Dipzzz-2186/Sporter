extends ../../layout/main

block content
  style.
    :root {
      --primary-color: #0095FF;
      --primary-dark: #0066CC;
      --primary-light: #34C7FF;
      --secondary-dark: #0B1F3F;
      --secondary-light: #152844;
      --accent-color: #FF6B35;
      --success-color: #00CC88;
      --warning-color: #FFAA00;
      --danger-color: #FF4757;
      --gray-50: #F8FAFC;
      --gray-100: #F1F5F9;
      --gray-200: #E2E8F0;
      --gray-300: #CBD5E1;
      --gray-400: #94A3B8;
      --gray-500: #64748B;
      --gray-600: #475569;
      --gray-700: #334155;
      --gray-800: #1E293B;
      --gray-900: #0F172A;
      --shadow-sm: 0 2px 8px rgba(0, 149, 255, 0.08);
      --shadow-md: 0 8px 25px rgba(0, 149, 255, 0.12);
      --shadow-lg: 0 15px 35px rgba(0, 149, 255, 0.15);
      --shadow-xl: 0 25px 50px rgba(0, 149, 255, 0.2);
      --gradient-primary: linear-gradient(135deg, var(--primary-color) 0%, var(--primary-light) 100%);
      --gradient-secondary: linear-gradient(135deg, var(--secondary-dark) 0%, var(--secondary-light) 100%);
      --gradient-accent: linear-gradient(135deg, var(--accent-color) 0%, #FF8E53 100%);
    }

    /* Dashboard Hero */
    .dashboard-hero {
      background: var(--gradient-secondary);
      padding: 3rem 0;
      margin-bottom: 2.5rem;
      border-radius: 0 0 30px 30px;
      color: white;
      position: relative;
      overflow: hidden;
    }

    .dashboard-hero::before {
      content: '';
      position: absolute;
      top: -30%;
      right: -20%;
      width: 500px;
      height: 500px;
      background: radial-gradient(circle, rgba(0, 149, 255, 0.15) 0%, transparent 70%);
      border-radius: 50%;
    }

    .dashboard-hero-content {
      position: relative;
      z-index: 2;
    }

    .dashboard-title {
      font-size: 2.5rem;
      font-weight: 800;
      margin-bottom: 0.5rem;
      color: white;
      background: linear-gradient(135deg, #FFFFFF 0%, var(--primary-light) 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .dashboard-subtitle {
      color: rgba(255, 255, 255, 0.9);
      font-size: 1.1rem;
      margin-bottom: 1.5rem;
      max-width: 600px;
    }

    .dashboard-stats {
      display: flex;
      gap: 1.5rem;
      margin-top: 2rem;
    }

    .dashboard-stat {
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 16px;
      padding: 1.5rem;
      color: white;
      min-width: 180px;
    }

    .stat-value {
      font-size: 2rem;
      font-weight: 800;
      margin-bottom: 0.25rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .stat-label {
      font-size: 0.9rem;
      opacity: 0.9;
    }

    /* Action Bar */
    .action-bar {
      background: white;
      border-radius: 20px;
      padding: 1.5rem 2rem;
      margin-bottom: 2rem;
      box-shadow: var(--shadow-lg);
      border: 2px solid var(--gray-200);
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 1.5rem;
      flex-wrap: wrap;
      animation: fadeInUp 0.4s ease-out;
    }

    @keyframes fadeInUp {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .create-btn {
      background: var(--gradient-primary);
      color: white;
      border: none;
      padding: 1rem 2rem;
      border-radius: 15px;
      font-weight: 700;
      font-size: 1rem;
      text-decoration: none;
      display: inline-flex;
      align-items: center;
      gap: 0.75rem;
      transition: all 0.3s ease;
      box-shadow: 0 6px 20px rgba(0, 149, 255, 0.3);
    }

    .create-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 10px 25px rgba(0, 149, 255, 0.4);
      color: white;
    }

    .search-container {
      position: relative;
      min-width: 300px;
    }

    .search-input {
      width: 100%;
      padding: 0.875rem 1rem 0.875rem 3.5rem;
      border: 2px solid var(--gray-200);
      border-radius: 15px;
      font-size: 1rem;
      transition: all 0.3s ease;
      background: white;
      box-shadow: var(--shadow-sm);
    }

    .search-input:focus {
      outline: none;
      border-color: var(--primary-color);
      box-shadow: 0 0 0 4px rgba(0, 149, 255, 0.1);
    }

    .search-icon {
      position: absolute;
      left: 1.25rem;
      top: 50%;
      transform: translateY(-50%);
      color: var(--primary-color);
      font-size: 1.2rem;
    }

    /* Table Container */
    .table-container {
      background: white;
      border-radius: 20px;
      overflow: hidden;
      box-shadow: var(--shadow-xl);
      border: 2px solid var(--gray-200);
      margin-bottom: 3rem;
      animation: fadeInUp 0.5s ease-out 0.2s backwards;
    }

    /* Modern Table */
    .modern-table {
      width: 100%;
      border-collapse: separate;
      border-spacing: 0;
      margin: 0;
    }

    .modern-table thead {
      background: linear-gradient(135deg, var(--gray-50) 0%, var(--gray-100) 100%);
    }

    .modern-table th {
      padding: 1.25rem 1.5rem;
      text-align: left;
      font-size: 0.85rem;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      color: var(--gray-600);
      border-bottom: 2px solid var(--gray-200);
      position: relative;
    }

    .modern-table th:not(:last-child)::after {
      content: '';
      position: absolute;
      right: 0;
      top: 50%;
      transform: translateY(-50%);
      width: 1px;
      height: 60%;
      background: var(--gray-300);
    }

    .modern-table tbody tr {
      transition: all 0.3s ease;
      border-bottom: 1px solid var(--gray-200);
    }

    .modern-table tbody tr:last-child {
      border-bottom: none;
    }

    .modern-table tbody tr:hover {
      background: linear-gradient(135deg, rgba(0, 149, 255, 0.03) 0%, rgba(52, 199, 255, 0.03) 100%);
      transform: translateX(4px);
    }

    .modern-table td {
      padding: 1.25rem 1.5rem;
      color: var(--gray-800);
      font-size: 0.95rem;
      border-bottom: 1px solid var(--gray-200);
    }

    .modern-table tbody tr:last-child td {
      border-bottom: none;
    }

    /* Status Badges */
    .badge-status {
      padding: 0.5rem 1rem;
      border-radius: 20px;
      font-size: 0.8rem;
      font-weight: 700;
      display: inline-flex;
      align-items: center;
      gap: 0.4rem;
      box-shadow: var(--shadow-sm);
      border: 1px solid transparent;
    }

    .status-active {
      background: linear-gradient(135deg, rgba(0, 204, 136, 0.15) 0%, rgba(0, 230, 153, 0.15) 100%);
      color: var(--success-color);
      border-color: rgba(0, 204, 136, 0.3);
    }

    .status-inactive {
      background: linear-gradient(135deg, rgba(255, 107, 53, 0.15) 0%, rgba(255, 142, 83, 0.15) 100%);
      color: var(--accent-color);
      border-color: rgba(255, 107, 53, 0.3);
    }

    .status-pending {
      background: linear-gradient(135deg, rgba(255, 170, 0, 0.15) 0%, rgba(255, 200, 80, 0.15) 100%);
      color: var(--warning-color);
      border-color: rgba(255, 170, 0, 0.3);
    }

    /* Action Buttons */
    .actions {
      display: flex;
      gap: 0.5rem;
      justify-content: flex-end;
    }

    .action-btn {
      width: 40px;
      height: 40px;
      border-radius: 12px;
      border: none;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.3s ease;
      text-decoration: none;
      box-shadow: var(--shadow-sm);
    }

    .action-btn:hover {
      transform: translateY(-3px);
      box-shadow: var(--shadow-md);
    }

    .edit-btn {
      background: linear-gradient(135deg, rgba(0, 149, 255, 0.1) 0%, rgba(52, 199, 255, 0.1) 100%);
      color: var(--primary-color);
      border: 1px solid rgba(0, 149, 255, 0.2);
    }

    .edit-btn:hover {
      background: var(--gradient-primary);
      color: white;
      border-color: transparent;
    }

    .delete-btn {
      background: linear-gradient(135deg, rgba(255, 71, 87, 0.1) 0%, rgba(255, 107, 53, 0.1) 100%);
      color: var(--danger-color);
      border: 1px solid rgba(255, 71, 87, 0.2);
    }

    .delete-btn:hover {
      background: linear-gradient(135deg, var(--danger-color) 0%, #FF6B35 100%);
      color: white;
      border-color: transparent;
    }

    .view-btn {
      background: linear-gradient(135deg, rgba(0, 204, 136, 0.1) 0%, rgba(0, 230, 153, 0.1) 100%);
      color: var(--success-color);
      border: 1px solid rgba(0, 204, 136, 0.2);
    }

    .view-btn:hover {
      background: linear-gradient(135deg, var(--success-color) 0%, #00E699 100%);
      color: white;
      border-color: transparent;
    }

    /* Product Info */
    .product-info {
      display: flex;
      align-items: center;
      gap: 1rem;
    }

    .product-image {
      width: 60px;
      height: 60px;
      border-radius: 12px;
      object-fit: cover;
      background: linear-gradient(135deg, var(--gray-100) 0%, var(--gray-200) 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--gray-400);
    }

    .product-details h6 {
      font-weight: 700;
      color: var(--gray-900);
      margin-bottom: 0.25rem;
    }

    .product-details p {
      font-size: 0.85rem;
      color: var(--gray-500);
      margin: 0;
    }

    /* Price Styling */
    .price-cell {
      font-weight: 700;
      color: var(--primary-color);
    }

    .stock-cell {
      font-weight: 700;
      color: var(--secondary-dark);
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .stock-low {
      color: var(--danger-color);
    }

    /* Empty State */
    .empty-state {
      text-align: center;
      padding: 5rem 2rem;
      animation: fadeInUp 0.6s ease-out;
    }

    .empty-state-icon {
      width: 120px;
      height: 120px;
      background: linear-gradient(135deg, var(--gray-50) 0%, var(--gray-100) 100%);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 auto 2rem;
      color: var(--primary-color);
      font-size: 3rem;
      border: 3px solid var(--gray-200);
    }

    .empty-state-title {
      font-size: 1.75rem;
      font-weight: 800;
      color: var(--secondary-dark);
      margin-bottom: 1rem;
    }

    .empty-state-description {
      color: var(--gray-600);
      margin-bottom: 2rem;
      max-width: 400px;
      margin-left: auto;
      margin-right: auto;
      line-height: 1.6;
      font-size: 1.05rem;
    }

    /* Modal Styling */
    .modal-content {
      border-radius: 20px;
      border: 2px solid var(--gray-200);
      box-shadow: var(--shadow-xl);
    }

    .modal-header {
      background: linear-gradient(135deg, var(--gray-50) 0%, var(--gray-100) 100%);
      border-bottom: 2px solid var(--gray-200);
      border-radius: 20px 20px 0 0;
      padding: 1.5rem 2rem;
    }

    .modal-title {
      font-weight: 800;
      color: var(--secondary-dark);
    }

    .modal-body {
      padding: 2rem;
      color: var(--gray-700);
    }

    .modal-footer {
      border-top: 2px solid var(--gray-200);
      padding: 1.5rem 2rem;
      border-radius: 0 0 20px 20px;
    }

    /* Filters */
    .filters {
      display: flex;
      gap: 1rem;
      align-items: center;
      margin-bottom: 1.5rem;
    }

    .filter-select {
      padding: 0.75rem 1.25rem;
      border: 2px solid var(--gray-200);
      border-radius: 12px;
      background: white;
      color: var(--gray-700);
      font-weight: 600;
      font-size: 0.9rem;
      min-width: 160px;
      transition: all 0.3s ease;
      cursor: pointer;
      box-shadow: var(--shadow-sm);
    }

    .filter-select:focus {
      outline: none;
      border-color: var(--primary-color);
      box-shadow: 0 0 0 4px rgba(0, 149, 255, 0.1);
    }

    .filter-select:hover {
      border-color: var(--primary-color);
    }

    /* Responsive Design */
    @media (max-width: 1200px) {
      .dashboard-stats {
        overflow-x: auto;
        padding-bottom: 1rem;
      }
    }

    @media (max-width: 992px) {
      .dashboard-hero {
        padding: 2.5rem 0;
        border-radius: 0 0 24px 24px;
      }

      .dashboard-title {
        font-size: 2rem;
      }

      .action-bar {
        flex-direction: column;
        align-items: stretch;
      }

      .search-container {
        min-width: 100%;
      }

      .modern-table {
        display: block;
        overflow-x: auto;
      }

      .product-info {
        min-width: 200px;
      }
    }

    @media (max-width: 768px) {
      .dashboard-hero {
        padding: 2rem 0;
      }

      .dashboard-title {
        font-size: 1.75rem;
      }

      .dashboard-subtitle {
        font-size: 1rem;
      }

      .dashboard-stats {
        flex-direction: column;
      }

      .dashboard-stat {
        width: 100%;
      }

      .modern-table th,
      .modern-table td {
        padding: 1rem;
      }

      .action-bar {
        padding: 1.25rem;
      }

      .filters {
        flex-direction: column;
        align-items: stretch;
      }

      .filter-select {
        width: 100%;
      }
    }

    @media (max-width: 576px) {
      .dashboard-hero {
        padding: 1.5rem 0;
        border-radius: 0 0 20px 20px;
      }

      .dashboard-title {
        font-size: 1.5rem;
      }

      .actions {
        flex-direction: column;
        align-items: stretch;
      }

      .action-btn {
        width: 100%;
        margin-bottom: 0.5rem;
      }

      .product-info {
        flex-direction: column;
        align-items: flex-start;
        gap: 0.5rem;
      }

      .product-image {
        width: 50px;
        height: 50px;
        font-size: 0.9rem;
      }
    }

    /* Loading Animation */
    .table-container.loading {
      position: relative;
      overflow: hidden;
    }

    .table-container.loading::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.6), transparent);
      animation: loading 1.5s infinite;
    }

    @keyframes loading {
      0% { transform: translateX(-100%); }
      100% { transform: translateX(100%); }
    }

  // DASHBOARD HERO
  .dashboard-hero
    .container
      .dashboard-hero-content
        h1.dashboard-title Kelola Merchandise
        p.dashboard-subtitle
          | Tambah, edit, dan kelola produk merchandise Anda dengan mudah. Pantau stok dan status produk.
        
        .dashboard-stats
          .dashboard-stat
            .stat-value
              i.bi.bi-box-seam
              span= merchandises ? merchandises.length : 0
            .stat-label Total Produk
          
          .dashboard-stat
            .stat-value
              i.bi.bi-check-circle
              span= merchandises ? merchandises.filter(m => m.status === 'active').length : 0
            .stat-label Produk Aktif
          
          .dashboard-stat
            .stat-value
              i.bi.bi-currency-exchange
              span= merchandises ? merchandises.reduce((sum, m) => sum + (m.stock || 0), 0).toLocaleString('id-ID') : 0
            .stat-label Total Stok
          
          .dashboard-stat
            .stat-value
              i.bi.bi-trophy
              span= merchandises ? new Set(merchandises.map(m => m.sport_id || m.sport_name)).size : 0
            .stat-label Cabang Olahraga

  .container

    // ALERTS
    if flash && flash.error && flash.error.length
      each msg in flash.error
        .alert.alert-danger.alert-dismissible.fade.show(
          role="alert" 
          style="border-radius: 15px; border: 2px solid var(--danger-color);"
        )
          .d-flex.align-items-center
            i.bi.bi-exclamation-triangle-fill.me-2
            div= msg
          button.btn-close(type="button" data-bs-dismiss="alert")

    if flash && flash.success && flash.success.length
      each msg in flash.success
        .alert.alert-success.alert-dismissible.fade.show(
          role="alert"
          style="border-radius: 15px; border: 2px solid var(--success-color);"
        )
          .d-flex.align-items-center
            i.bi.bi-check-circle-fill.me-2
            div= msg
          button.btn-close(type="button" data-bs-dismiss="alert")

    // ACTION BAR
    .action-bar
      .d-flex.gap-2.align-items-center
        a.create-btn(href="/seller/merchandise/create")
          i.bi.bi-plus-lg
          | Tambah Merchandise
      
      .d-flex.gap-3.align-items-center
        .search-container
          i.bi.bi-search.search-icon
          input.search-input.form-control(
            type="search" 
            placeholder="Cari merchandise..."
            oninput="filterTable(this.value)"
          )
        
        select.filter-select#statusFilter(onchange="filterByStatus(this.value)")
          option(value="") Semua Status
          option(value="active") Aktif
          option(value="inactive") Tidak Aktif

    // FILTERS
    .filters
      select.filter-select#sportFilter(onchange="filterBySport(this.value)")
        option(value="") Semua Cabang
        each sport in sports || []
          option(value=sport.id)= sport.name
      
      select.filter-select#stockFilter(onchange="filterByStock(this.value)")
        option(value="") Semua Stok
        option(value="high") Stok Tinggi (>50)
        option(value="medium") Stok Sedang (10-50)
        option(value="low") Stok Rendah (<10)
        option(value="out") Stok Habis (0)

    // TABLE
    if merchandises && merchandises.length
      .table-container
        table.table.modern-table.mb-0
          thead
            tr
              th Produk
              th Cabang
              th Harga
              th Stok
              th Status
              th.text-end Aksi
          tbody#merchTable
            each m in merchandises
              tr(
                data-name=m.name.toLowerCase()
                data-status=m.status
                data-sport=m.sport_id || m.sport_name || ''
                data-stock=m.stock || 0
              )
                td
                  .product-info
                    if m.image_url
                      img.product-image(src=m.image_url alt=m.name)
                    else
                      .product-image
                        i.bi.bi-t-shirt
                    .product-details
                      h6.mb-1= m.name
                      p
                        i.bi.bi-calendar3.me-1
                        | Ditambahkan: #{new Date(m.created_at || Date.now()).toLocaleDateString('id-ID')}
                
                td
                  span.badge-status.status-pending
                    i.bi.bi-trophy
                    = m.sport_name || 'Semua'
                
                td.price-cell
                  | Rp #{Number(m.price).toLocaleString('id-ID')}
                
                td
                  .stock-cell(class=(m.stock < 10 ? 'stock-low' : ''))
                    i.bi.bi-box
                    = m.stock || 0
                    | pcs
                
                td
                  if m.status === 'active'
                    span.badge-status.status-active
                      i.bi.bi-check-circle
                      | Active
                  else
                    span.badge-status.status-inactive
                      i.bi.bi-x-circle
                      | Inactive
                
                td.text-end
                  .actions
                    a.action-btn.view-btn(
                      href=`/store/${m.id}` 
                      target="_blank"
                      title="Lihat di Store"
                    )
                      i.bi.bi-eye
                    a.action-btn.edit-btn(
                      href=`/seller/merchandise/${m.id}/edit`
                      title="Edit"
                    )
                      i.bi.bi-pencil
                    button.action-btn.delete-btn(
                      type="button"
                      title="Hapus"
                      onclick=`confirmDelete(${m.id}, '${m.name.replace(/'/g, "\\'")}')`
                    )
                      i.bi.bi-trash
    else
      .empty-state
        .empty-state-icon
          i.bi.bi-box-seam
        h3.empty-state-title Belum Ada Merchandise
        p.empty-state-description
          | Mulai tambahkan produk merchandise pertama Anda untuk dijual di marketplace SPORTER.
        .mt-4
          a.btn.btn-lg.btn-primary(href="/seller/merchandise/create" style="background: var(--gradient-primary); border: none;")
            i.bi.bi-plus-lg.me-2
            | Tambah Produk Pertama

  // DELETE MODAL
  #deleteModal.modal.fade(tabindex="-1" aria-labelledby="deleteModalLabel" aria-hidden="true")
    .modal-dialog.modal-dialog-centered
      .modal-content
        .modal-header
          h5.modal-title
            i.bi.bi-exclamation-triangle-fill.text-danger.me-2
            | Hapus Merchandise
          button.btn-close(type="button" data-bs-dismiss="modal" aria-label="Close")
        .modal-body
          p#deleteMessage.fs-5
          .alert.alert-warning.mt-3(role="alert" style="border-radius: 12px;")
            i.bi.bi-info-circle-fill.me-2
            | Tindakan ini tidak dapat dibatalkan. Semua data produk akan dihapus secara permanen.
        .modal-footer
          button.btn.btn-outline-secondary(type="button" data-bs-dismiss="modal" style="border-radius: 12px; padding: 0.75rem 1.5rem;")
            i.bi.bi-x-circle.me-2
            | Batal
          form#deleteForm(method="post")
            button.btn.btn-danger(type="submit" style="border-radius: 12px; padding: 0.75rem 1.5rem; background: var(--gradient-accent); border: none;")
              i.bi.bi-trash-fill.me-2
              | Hapus Permanen

  script.
    // Filter Table by Search
    function filterTable(q) {
      q = q.toLowerCase().trim();
      const rows = document.querySelectorAll('#merchTable tr');
      let visibleCount = 0;
      
      rows.forEach(row => {
        const name = row.dataset.name;
        const shouldShow = q === '' || name.includes(q);
        
        if (shouldShow) {
          row.style.display = '';
          row.style.animation = 'fadeInUp 0.3s ease-out';
          visibleCount++;
        } else {
          row.style.display = 'none';
        }
      });
      
      // Update total products count
      const totalCountElement = document.querySelector('.dashboard-stat:nth-child(1) .stat-value span');
      if (totalCountElement && visibleCount > 0) {
        totalCountElement.textContent = visibleCount;
      }
    }
    
    // Filter by Status
    function filterByStatus(status) {
      const rows = document.querySelectorAll('#merchTable tr');
      const sportFilter = document.getElementById('sportFilter').value;
      const stockFilter = document.getElementById('stockFilter').value;
      
      rows.forEach(row => {
        const rowStatus = row.dataset.status;
        const rowSport = row.dataset.sport;
        const rowStock = parseInt(row.dataset.stock);
        
        let showByStatus = !status || rowStatus === status;
        let showBySport = !sportFilter || rowSport === sportFilter;
        let showByStock = true;
        
        // Apply stock filter
        if (stockFilter) {
          switch(stockFilter) {
            case 'high': showByStock = rowStock > 50; break;
            case 'medium': showByStock = rowStock >= 10 && rowStock <= 50; break;
            case 'low': showByStock = rowStock < 10 && rowStock > 0; break;
            case 'out': showByStock = rowStock === 0; break;
          }
        }
        
        const shouldShow = showByStatus && showBySport && showByStock;
        row.style.display = shouldShow ? '' : 'none';
      });
    }
    
    // Filter by Sport
    function filterBySport(sportId) {
      const rows = document.querySelectorAll('#merchTable tr');
      const statusFilter = document.getElementById('statusFilter').value;
      const stockFilter = document.getElementById('stockFilter').value;
      
      rows.forEach(row => {
        const rowSport = row.dataset.sport;
        const rowStatus = row.dataset.status;
        const rowStock = parseInt(row.dataset.stock);
        
        let showBySport = !sportId || rowSport === sportId;
        let showByStatus = !statusFilter || rowStatus === statusFilter;
        let showByStock = true;
        
        // Apply stock filter
        if (stockFilter) {
          switch(stockFilter) {
            case 'high': showByStock = rowStock > 50; break;
            case 'medium': showByStock = rowStock >= 10 && rowStock <= 50; break;
            case 'low': showByStock = rowStock < 10 && rowStock > 0; break;
            case 'out': showByStock = rowStock === 0; break;
          }
        }
        
        const shouldShow = showBySport && showByStatus && showByStock;
        row.style.display = shouldShow ? '' : 'none';
      });
    }
    
    // Filter by Stock
    function filterByStock(stockLevel) {
      const rows = document.querySelectorAll('#merchTable tr');
      const statusFilter = document.getElementById('statusFilter').value;
      const sportFilter = document.getElementById('sportFilter').value;
      
      rows.forEach(row => {
        const rowStock = parseInt(row.dataset.stock);
        const rowStatus = row.dataset.status;
        const rowSport = row.dataset.sport;
        
        let showByStock = true;
        if (stockLevel) {
          switch(stockLevel) {
            case 'high': showByStock = rowStock > 50; break;
            case 'medium': showByStock = rowStock >= 10 && rowStock <= 50; break;
            case 'low': showByStock = rowStock < 10 && rowStock > 0; break;
            case 'out': showByStock = rowStock === 0; break;
          }
        }
        
        let showByStatus = !statusFilter || rowStatus === statusFilter;
        let showBySport = !sportFilter || rowSport === sportFilter;
        
        const shouldShow = showByStock && showByStatus && showBySport;
        row.style.display = shouldShow ? '' : 'none';
      });
    }
    
    // Reset all filters
    function resetFilters() {
      document.getElementById('searchInput').value = '';
      document.getElementById('statusFilter').value = '';
      document.getElementById('sportFilter').value = '';
      document.getElementById('stockFilter').value = '';
      
      const rows = document.querySelectorAll('#merchTable tr');
      rows.forEach(row => {
        row.style.display = '';
      });
    }
    
    // Confirm Delete
    function confirmDelete(id, name) {
      document.getElementById('deleteMessage').textContent = 
        `Apakah Anda yakin ingin menghapus produk "${name}"?`;
      document.getElementById('deleteForm').action = 
        `/seller/merchandise/${id}/delete`;
      
      const deleteModal = new bootstrap.Modal(document.getElementById('deleteModal'));
      deleteModal.show();
    }
    
    // Initialize table
    document.addEventListener('DOMContentLoaded', function() {
      // Add row animations
      const rows = document.querySelectorAll('#merchTable tr');
      rows.forEach((row, index) => {
        row.style.animationDelay = `${index * 0.05}s`;
        row.style.animation = 'fadeInUp 0.3s ease-out forwards';
        row.style.opacity = '0';
      });
      
      // Add keyboard shortcuts
      document.addEventListener('keydown', function(e) {
        // Ctrl/Cmd + N for new product
        if ((e.ctrlKey || e.metaKey) && e.key === 'n') {
          e.preventDefault();
          window.location.href = '/seller/merchandise/create';
        }
        
        // Ctrl/Cmd + F for search focus
        if ((e.ctrlKey || e.metaKey) && e.key === 'f') {
          e.preventDefault();
          document.getElementById('searchInput').focus();
        }
        
        // Escape to reset filters
        if (e.key === 'Escape') {
          resetFilters();
        }
      });
      
      // Highlight low stock items
      rows.forEach(row => {
        const stock = parseInt(row.dataset.stock);
        if (stock < 10) {
          const stockCell = row.querySelector('.stock-cell');
          if (stockCell) {
            stockCell.classList.add('stock-low');
          }
        }
      });
    });